import{j as e,A as j,t as p,L as g}from"./ui-3vQ9-yJw.js";import{u as f,F as y,a,b as t,c as i,d as n,e as o,t as N}from"./form-DmsWy2lV.js";import{b,a as v,e as w,L as m,s as R}from"./index-sJx7Xdqp.js";import{u as F}from"./useMutation-NgwOv-kr.js";import{B as C}from"./button-BxgNf8B1.js";import{I as c}from"./input-DhaQutbK.js";import{C as L,a as P}from"./card-C-wb9owH.js";import{r as S}from"./types-DkwUutMY.js";import{m as k}from"./proxy-Dkg6DtWx.js";import"./vendor-C0Dkio3Y.js";import"./label-CG0jOVEo.js";import"./firebase-CupIkEz0.js";function T(){const{toast:d}=b(),[,x]=v(),h=w(),r=f({resolver:N(S),defaultValues:{residencyName:"",adminUsername:"",adminPassword:"",adminPhone:""}}),l=F({mutationFn:async s=>await R.registerResidency(s),onSuccess:()=>{h.invalidateQueries({queryKey:["residencies"]}),d({title:"Residency Registered",description:"Your society has been created successfully. Please login."}),x("/login")},onError:s=>{d({title:"Registration Failed",description:s.message,variant:"destructive"})}}),u=s=>{l.mutate(s)};return e.jsxs("div",{className:"min-h-screen grid lg:grid-cols-2",children:[e.jsxs("div",{className:"hidden lg:flex flex-col justify-between bg-primary p-12 text-primary-foreground relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=1600&h=1600&fit=crop')] opacity-10 bg-cover bg-center"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-primary/90"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs(m,{href:"/login",className:"flex items-center gap-2 text-primary-foreground/80 hover:text-white transition-colors mb-8",children:[e.jsx(j,{className:"h-4 w-4"}),"Back to Login"]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(p,{className:"h-8 w-8"}),e.jsx("span",{className:"font-display font-bold text-2xl",children:"Register Society"})]}),e.jsx("p",{className:"text-primary-foreground/80",children:"Create a new secure environment for your residency."})]}),e.jsx("div",{className:"relative z-10",children:e.jsx("blockquote",{className:"space-y-2",children:e.jsx("p",{className:"text-xl font-display font-medium leading-relaxed",children:'"Manage residents, guards, and visitors with a dedicated workspace for your society."'})})})]}),e.jsx("div",{className:"flex items-center justify-center p-8 bg-slate-50",children:e.jsxs(k.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"w-full max-w-sm space-y-6",children:[e.jsxs("div",{className:"text-center lg:text-left",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Register New Residency"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Set up your society and admin account."})]}),e.jsx(L,{className:"border-0 shadow-lg",children:e.jsx(P,{className:"pt-6",children:e.jsx(y,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(u),className:"space-y-4",children:[e.jsx(a,{control:r.control,name:"residencyName",render:({field:s})=>e.jsxs(t,{children:[e.jsx(i,{children:"Residency Name"}),e.jsx(n,{children:e.jsx(c,{placeholder:"e.g. Royal Heights",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"adminUsername",render:({field:s})=>e.jsxs(t,{children:[e.jsx(i,{children:"Admin Username"}),e.jsx(n,{children:e.jsx(c,{placeholder:"admin_username",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"adminPassword",render:({field:s})=>e.jsxs(t,{children:[e.jsx(i,{children:"Admin Password"}),e.jsx(n,{children:e.jsx(c,{type:"password",...s})}),e.jsx(o,{})]})}),e.jsx(a,{control:r.control,name:"adminPhone",render:({field:s})=>e.jsxs(t,{children:[e.jsx(i,{children:"Phone (Optional)"}),e.jsx(n,{children:e.jsx(c,{placeholder:"+91...",...s})}),e.jsx(o,{})]})}),e.jsx(C,{type:"submit",className:"w-full",disabled:l.isPending,children:l.isPending?e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Register Residency"})]})})})}),e.jsx("div",{className:"text-center text-sm",children:e.jsx(m,{href:"/login",className:"text-primary hover:underline",children:"Already have an account? Sign in"})})]})})]})}export{T as default};
