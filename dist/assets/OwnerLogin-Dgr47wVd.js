import{r as n,j as e,s as h,L as g}from"./ui-3vQ9-yJw.js";import{a as w,b as j}from"./index-sJx7Xdqp.js";import{B as y}from"./button-BxgNf8B1.js";import{I as m}from"./input-DhaQutbK.js";import{C as v,b as N,c as b,a as L}from"./card-C-wb9owH.js";import"./vendor-C0Dkio3Y.js";import"./firebase-CupIkEz0.js";function k(){const[o,u]=n.useState(""),[i,p]=n.useState(""),[l,c]=n.useState(!1),[,x]=w(),{toast:t}=j(),f=async s=>{s.preventDefault(),c(!0);try{const a=await fetch("/api/ownerLogin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:i})}),d=await a.text();let r;try{r=JSON.parse(d)}catch{throw console.error("Invalid JSON from ownerLogin:",d),new Error("Server error: Invalid response format")}a.ok?(localStorage.setItem("owner_session",JSON.stringify(r.owner)),t({title:"Welcome back!",description:"Logged in successfully."}),x(`/Owner/${r.owner.username}`)):t({title:"Login Failed",description:r.message||"Invalid credentials",variant:"destructive"})}catch(a){console.error("Login error:",a),t({title:"Error",description:"Something went wrong. Please try again.",variant:"destructive"})}finally{c(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:e.jsxs(v,{className:"w-full max-w-md mx-4",children:[e.jsxs(N,{className:"space-y-1 flex flex-col items-center",children:[e.jsx("div",{className:"bg-primary/10 p-3 rounded-full mb-2",children:e.jsx(h,{className:"h-6 w-6 text-primary"})}),e.jsx(b,{className:"text-2xl font-bold text-center",children:"Owner Login"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your residencies"})]}),e.jsx(L,{children:e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Username"}),e.jsx(m,{type:"text",value:o,onChange:s=>u(s.target.value),placeholder:"Enter username",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Password"}),e.jsx(m,{type:"password",value:i,onChange:s=>p(s.target.value),placeholder:"Enter password",required:!0})]}),e.jsxs(y,{type:"submit",className:"w-full",disabled:l,children:[l?e.jsx(g,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Login"]})]})})]})})}export{k as default};
