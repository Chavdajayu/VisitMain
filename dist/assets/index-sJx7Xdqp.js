const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/not-found-C7hJqVuk.js","assets/ui-3vQ9-yJw.js","assets/vendor-C0Dkio3Y.js","assets/card-C-wb9owH.js","assets/firebase-CupIkEz0.js","assets/VisitorForm-CxBwF6tx.js","assets/form-DmsWy2lV.js","assets/label-CG0jOVEo.js","assets/types-DkwUutMY.js","assets/use-visitor-requests-BBxtUmkU.js","assets/useMutation-NgwOv-kr.js","assets/button-BxgNf8B1.js","assets/input-DhaQutbK.js","assets/select-BvEVGBYH.js","assets/index-C-65KjJ3.js","assets/index-CL2D7O4A.js","assets/proxy-Dkg6DtWx.js","assets/VisitorStatus-LhQBSClJ.js","assets/Login-CJAUrKbH.js","assets/RegisterResidency-CRTBlL4O.js","assets/ResidentDashboard-zF8P6zkV.js","assets/Layout-q0bwL00g.js","assets/RequestCard-BvZ_Mquu.js","assets/en-US-BddybvhD.js","assets/tabs-CBmgB0uo.js","assets/GuardDashboard-_yDdruN5.js","assets/AdminDashboard-BuX1942w.js","assets/badge-DiQtRYnG.js","assets/AdminManagement-DDKTrvCh.js","assets/alert-dialog-4hHLxoKE.js","assets/OwnerLogin-Dgr47wVd.js","assets/OwnerDashboard-CYhqIZyF.js","assets/Maintenance-wChMdD-U.js"])))=>i.map(i=>d[i]);
import{r as b,R as Ti,j as g,c as Mt,a as Ee,u as ge,b as fr,P as ae,B as Ri,d as Si,e as cs,f as Q,g as Ze,h as ls,i as Ii,k as Ai,l as Tt,m as Pi,X as ki,D as Oi,n as Ni,L as _i}from"./ui-3vQ9-yJw.js";import{a as Di,r as Mi}from"./vendor-C0Dkio3Y.js";import{i as Fi,g as ji,s as Li,a as $i,b as Ui,q as J,o as pt,c as j,d as V,e as F,f as K,h as qi,w as Oe,j as Wt,k as xt,l as Ne,u as _e,m as Fe,n as Bi,p as un,r as Rt,_ as St,C as It,t as kn,E as ds,v as On,F as Vi,x as Qt,y as zi,z as Nn,A as Hi,B as Ki,D as Wi}from"./firebase-CupIkEz0.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var mt={},hr;function Qi(){if(hr)return mt;hr=1;var e=Di();return mt.createRoot=e.createRoot,mt.hydrateRoot=e.hydrateRoot,mt}var Gi=Qi();const Yi="modulepreload",Xi=function(e){return"/"+e},pr={},ne=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(l){return Promise.all(l.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");s=c(n.map(l=>{if(l=Xi(l),l in pr)return;pr[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":Yi,d||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),d)return new Promise((x,m)=>{f.addEventListener("load",x),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};function Ji(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,s,o,i=[],a="",c=e.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(i.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),o=s.indexOf(".",1),i.push(s.substring(1,~r?r:~o?o:s.length)),a+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(a+=(~r?"?":"")+"\\"+s.substring(o))):a+="/"+s;return{keys:i,pattern:new RegExp("^"+a+(t?"(?=$|/)":"/?$"),"i")}}var Gt={exports:{}},Yt={};var xr;function Zi(){if(xr)return Yt;xr=1;var e=Mi();function t(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,o=e.useLayoutEffect,i=e.useDebugValue;function a(u,f){var x=f(),m=r({inst:{value:x,getSnapshot:f}}),h=m[0].inst,p=m[1];return o(function(){h.value=x,h.getSnapshot=f,c(h)&&p({inst:h})},[u,x,f]),s(function(){return c(h)&&p({inst:h}),u(function(){c(h)&&p({inst:h})})},[u]),i(x),x}function c(u){var f=u.getSnapshot;u=u.value;try{var x=f();return!n(u,x)}catch{return!0}}function l(u,f){return f()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:a;return Yt.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,Yt}var mr;function ea(){return mr||(mr=1,Gt.exports=Zi()),Gt.exports}var ta=ea();const na=Ti.useInsertionEffect,ra=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",us=ra?b.useLayoutEffect:b.useEffect,sa=na||us,_n=e=>{const t=b.useRef([e,(...n)=>t[0](...n)]).current;return sa(()=>{t[0]=e}),t[1]},oa="popstate",Dn="pushState",Mn="replaceState",ia="hashchange",br=[oa,Dn,Mn,ia],aa=e=>{for(const t of br)addEventListener(t,e);return()=>{for(const t of br)removeEventListener(t,e)}},fs=(e,t)=>ta.useSyncExternalStore(aa,e,t),ca=()=>location.search,la=({ssrSearch:e=""}={})=>fs(ca,()=>e),gr=()=>location.pathname,da=({ssrPath:e}={})=>fs(gr,e?()=>e:gr),ua=(e,{replace:t=!1,state:n=null}={})=>history[t?Mn:Dn](n,"",e),fa=(e={})=>[da(e),ua],yr=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[yr]>"u"){for(const e of[Dn,Mn]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,yr,{value:!0})}const ha=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",hs=(e="")=>e==="/"?"":e,pa=(e,t)=>e[0]==="~"?e.slice(1):hs(t)+e,xa=(e="",t)=>ha(wr(hs(e)),wr(t)),wr=e=>{try{return decodeURI(e)}catch{return e}},ps={hook:fa,searchHook:la,parser:Ji,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},xs=b.createContext(ps),lt=()=>b.useContext(xs),ms={},bs=b.createContext(ms),ma=()=>b.useContext(bs),Ft=e=>{const[t,n]=e.hook(e);return[xa(e.base,t),_n((r,s)=>n(pa(r,e.base),s))]},ba=()=>Ft(lt()),gs=(e,t,n,r)=>{const{pattern:s,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),i=s.exec(n)||[],[a,...c]=i;return a!==void 0?[!0,(()=>{const l=o!==!1?Object.fromEntries(o.map((u,f)=>[u,c[f]])):i.groups;let d={...c};return l&&Object.assign(d,l),d})(),...r?[a]:[]]:[!1,null]},ga=({children:e,...t})=>{const n=lt(),r=t.hook?ps:n;let s=r;const[o,i]=t.ssrPath?.split("?")??[];i&&(t.ssrSearch=i,t.ssrPath=o),t.hrefs=t.hrefs??t.hook?.hrefs;let a=b.useRef({}),c=a.current,l=c;for(let d in r){const u=d==="base"?r[d]+(t[d]||""):t[d]||r[d];c===l&&u!==l[d]&&(a.current=l={...l}),l[d]=u,u!==r[d]&&(s=l)}return b.createElement(xs.Provider,{value:s,children:e})},vr=({children:e,component:t},n)=>t?b.createElement(t,{params:n}):typeof e=="function"?e(n):e,ya=e=>{let t=b.useRef(ms),n=t.current;for(const r in e)e[r]!==n[r]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},z=({path:e,nest:t,match:n,...r})=>{const s=lt(),[o]=Ft(s),[i,a,c]=n??gs(s.parser,e,o,t),l=ya({...ma(),...a});if(!i)return null;const d=c?b.createElement(ga,{base:c},vr(r,l)):vr(r,l);return b.createElement(bs.Provider,{value:l,children:d})},Gf=b.forwardRef((e,t)=>{const n=lt(),[r,s]=Ft(n),{to:o="",href:i=o,onClick:a,asChild:c,children:l,className:d,replace:u,state:f,...x}=e,m=_n(p=>{p.ctrlKey||p.metaKey||p.altKey||p.shiftKey||p.button!==0||(a?.(p),p.defaultPrevented||(p.preventDefault(),s(i,e)))}),h=n.hrefs(i[0]==="~"?i.slice(1):n.base+i,n);return c&&b.isValidElement(l)?b.cloneElement(l,{onClick:m,href:h}):b.createElement("a",{...x,onClick:m,href:h,className:d?.call?d(r===i):d,children:l,ref:t})}),ys=e=>Array.isArray(e)?e.flatMap(t=>ys(t&&t.type===b.Fragment?t.props.children:t)):[e],wa=({children:e,location:t})=>{const n=lt(),[r]=Ft(n);for(const s of ys(e)){let o=0;if(b.isValidElement(s)&&(o=gs(n.parser,s.props.path,t||r,s.props.nest))[0])return b.cloneElement(s,{match:o})}return null},W=e=>{const{to:t,href:n=t}=e,[,r]=ba(),s=_n(()=>r(t||n,e));return us(()=>{s()},[]),null};var dt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Re=typeof window>"u"||"Deno"in globalThis;function te(){}function va(e,t){return typeof e=="function"?e(t):e}function fn(e){return typeof e=="number"&&e>=0&&e!==1/0}function ws(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Le(e,t){return typeof e=="function"?e(t):e}function re(e,t){return typeof e=="function"?e(t):e}function Er(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:i,stale:a}=e;if(i){if(r){if(t.queryHash!==Fn(i,t.options))return!1}else if(!tt(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||s&&s!==t.state.fetchStatus||o&&!o(t))}function Cr(e,t){const{exact:n,status:r,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(et(t.options.mutationKey)!==et(o))return!1}else if(!tt(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Fn(e,t){return(t?.queryKeyHashFn||et)(e)}function et(e){return JSON.stringify(e,(t,n)=>pn(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function tt(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!tt(e[n],t[n])):!1}function vs(e,t){if(e===t)return e;const n=Tr(e)&&Tr(t);if(n||pn(e)&&pn(t)){const r=n?e:Object.keys(e),s=r.length,o=n?t:Object.keys(t),i=o.length,a=n?[]:{};let c=0;for(let l=0;l<i;l++){const d=n?l:o[l];(!n&&r.includes(d)||n)&&e[d]===void 0&&t[d]===void 0?(a[d]=void 0,c++):(a[d]=vs(e[d],t[d]),a[d]===e[d]&&e[d]!==void 0&&c++)}return s===i&&c===s?e:a}return t}function hn(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Tr(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function pn(e){if(!Rr(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Rr(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Rr(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ea(e){return new Promise(t=>{setTimeout(t,e)})}function xn(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?vs(e,t):t}function Ca(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function Ta(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var jn=Symbol();function Es(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===jn?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ra=class extends dt{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Re&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Ln=new Ra,Sa=class extends dt{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Re&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},At=new Sa;function mn(){let e,t;const n=new Promise((s,o)=>{e=s,t=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function Ia(e){return Math.min(1e3*2**e,3e4)}function Cs(e){return(e??"online")==="online"?At.isOnline():!0}var Ts=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Xt(e){return e instanceof Ts}function Rs(e){let t=!1,n=0,r=!1,s;const o=mn(),i=h=>{r||(f(new Ts(h)),e.abort?.())},a=()=>{t=!0},c=()=>{t=!1},l=()=>Ln.isFocused()&&(e.networkMode==="always"||At.isOnline())&&e.canRun(),d=()=>Cs(e.networkMode)&&e.canRun(),u=h=>{r||(r=!0,e.onSuccess?.(h),s?.(),o.resolve(h))},f=h=>{r||(r=!0,e.onError?.(h),s?.(),o.reject(h))},x=()=>new Promise(h=>{s=p=>{(r||l())&&h(p)},e.onPause?.()}).then(()=>{s=void 0,r||e.onContinue?.()}),m=()=>{if(r)return;let h;const p=n===0?e.initialPromise:void 0;try{h=p??e.fn()}catch(y){h=Promise.reject(y)}Promise.resolve(h).then(u).catch(y=>{if(r)return;const w=e.retry??(Re?0:3),v=e.retryDelay??Ia,E=typeof v=="function"?v(n,y):v,C=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(t||!C){f(y);return}n++,e.onFail?.(n,y),Ea(E).then(()=>l()?void 0:x()).then(()=>{t?f(y):m()})})};return{promise:o,cancel:i,continue:()=>(s?.(),o),cancelRetry:a,continueRetry:c,canStart:d,start:()=>(d()?m():x().then(m),o)}}function Aa(){let e=[],t=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const o=a=>{t?e.push(a):s(()=>{n(a)})},i=()=>{const a=e;e=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;t++;try{c=a()}finally{t--,t||i()}return c},batchCalls:a=>(...c)=>{o(()=>{a(...c)})},schedule:o,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var H=Aa(),Ss=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),fn(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Re?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},Pa=class extends Ss{#e;#t;#r;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=ka(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const n=xn(this.state.data,e,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(te).catch(te):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>re(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jn||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!ws(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const a=this.observers.find(c=>c.options.queryFn);a&&this.setOptions(a.options)}const n=new AbortController,r=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},s=()=>{const a=Es(this.options,t),c={queryKey:this.queryKey,meta:this.meta};return r(c),this.#o=!1,this.options.persister?this.options.persister(a,c,this):a(c)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};r(o),this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta});const i=a=>{Xt(a)&&a.silent||this.#s({type:"error",error:a}),Xt(a)||(this.#r.config.onError?.(a,this),this.#r.config.onSettled?.(this.state.data,a,this)),this.scheduleGc()};return this.#n=Rs({initialPromise:t?.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:a=>{if(a===void 0){i(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(a)}catch(c){i(c);return}this.#r.config.onSuccess?.(a,this),this.#r.config.onSettled?.(a,this.state.error,this),this.scheduleGc()},onError:i,onFail:(a,c)=>{this.#s({type:"failed",failureCount:a,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}),this.#n.start()}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Is(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return Xt(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),H.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Is(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Cs(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ka(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Oa=class extends dt{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,s=t.queryHash??Fn(r,t);let o=this.get(s);return o||(o=new Pa({cache:this,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){H.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>Er(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>Er(e,n)):t}notify(e){H.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){H.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){H.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Na=class extends Ss{#e;#t;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||_a(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){this.#r=Rs({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(r,s)=>{this.#n({type:"failed",failureCount:r,error:s})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",n=!this.#r.canStart();try{if(!t){this.#n({type:"pending",variables:e,isPaused:n}),await this.#t.config.onMutate?.(e,this);const s=await this.options.onMutate?.(e);s!==this.state.context&&this.#n({type:"pending",context:s,variables:e,isPaused:n})}const r=await this.#r.start();return await this.#t.config.onSuccess?.(r,e,this.state.context,this),await this.options.onSuccess?.(r,e,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,e,this.state.context),this.#n({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,e,this.state.context,this),await this.options.onError?.(r,e,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,e,this.state.context),r}finally{this.#n({type:"error",error:r})}}finally{this.#t.runNext(this)}}#n(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),H.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function _a(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Da=class extends dt{constructor(e={}){super(),this.config=e,this.#e=new Map,this.#t=Date.now()}#e;#t;build(e,t,n){const r=new Na({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){const t=bt(e),n=this.#e.get(t)??[];n.push(e),this.#e.set(t,n),this.notify({type:"added",mutation:e})}remove(e){const t=bt(e);if(this.#e.has(t)){const n=this.#e.get(t)?.filter(r=>r!==e);n&&(n.length===0?this.#e.delete(t):this.#e.set(t,n))}this.notify({type:"removed",mutation:e})}canRun(e){const t=this.#e.get(bt(e))?.find(n=>n.state.status==="pending");return!t||t===e}runNext(e){return this.#e.get(bt(e))?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){H.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#e.values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(n=>Cr(t,n))}findAll(e={}){return this.getAll().filter(t=>Cr(e,t))}notify(e){H.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return H.batch(()=>Promise.all(e.map(t=>t.continue().catch(te))))}};function bt(e){return e.options.scope?.id??String(e.mutationId)}function Sr(e){return{onFetch:(t,n)=>{const r=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],i=t.state.data?.pageParams||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let d=!1;const u=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(t.signal.aborted?d=!0:t.signal.addEventListener("abort",()=>{d=!0}),t.signal)})},f=Es(t.options,t.fetchOptions),x=async(m,h,p)=>{if(d)return Promise.reject();if(h==null&&m.pages.length)return Promise.resolve(m);const y={queryKey:t.queryKey,pageParam:h,direction:p?"backward":"forward",meta:t.options.meta};u(y);const w=await f(y),{maxPages:v}=t.options,E=p?Ta:Ca;return{pages:E(m.pages,w,v),pageParams:E(m.pageParams,h,v)}};if(s&&o.length){const m=s==="backward",h=m?Ma:Ir,p={pages:o,pageParams:i},y=h(r,p);a=await x(p,y,m)}else{const m=e??o.length;do{const h=c===0?i[0]??r.initialPageParam:Ir(r,a);if(c>0&&h==null)break;a=await x(a,h),c++}while(c<m)}return a};t.options.persister?t.fetchFn=()=>t.options.persister?.(l,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=l}}}function Ir(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Ma(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var Fa=class{#e;#t;#r;#n;#i;#o;#s;#a;constructor(e={}){this.#e=e.queryCache||new Oa,this.#t=e.mutationCache||new Da,this.#r=e.defaultOptions||{},this.#n=new Map,this.#i=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#s=Ln.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=At.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#s?.(),this.#s=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=this.#e.build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Le(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),o=this.#e.get(r.queryHash)?.state.data,i=va(t,o);if(i!==void 0)return this.#e.build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return H.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;H.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e,r={type:"active",...e};return H.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=H.batch(()=>this.#e.findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(te).catch(te)}invalidateQueries(e={},t={}){return H.batch(()=>{if(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:t?.cancelRefetch??!0},r=H.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(te)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(te)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(Le(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(te).catch(te)}fetchInfiniteQuery(e){return e.behavior=Sr(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(te).catch(te)}ensureInfiniteQueryData(e){return e.behavior=Sr(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return At.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(et(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()];let n={};return t.forEach(r=>{tt(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){this.#i.set(et(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#i.values()];let n={};return t.forEach(r=>{tt(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Fn(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===jn&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},ja=class extends dt{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#s=mn(),this.options.experimental_prefetchInRender||this.#s.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#n=void 0;#i;#o;#s;#a;#x;#f;#h;#l;#d;#c;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Ar(this.#t,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return bn(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return bn(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#v(),this.#t.removeObserver(this)}setOptions(e,t){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof re(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#E(),this.#t.setOptions(this.options),n._defaulted&&!hn(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&Pr(this.#t,r,this.options,n)&&this.#u(),this.updateResult(t),s&&(this.#t!==r||re(this.options.enabled,this.#t)!==re(n.enabled,this.#t)||Le(this.options.staleTime,this.#t)!==Le(n.staleTime,this.#t))&&this.#m();const o=this.#b();s&&(this.#t!==r||re(this.options.enabled,this.#t)!==re(n.enabled,this.#t)||o!==this.#c)&&this.#g(o)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return $a(this,n)&&(this.#n=n,this.#o=this.options,this.#i=this.#t.state),n}getCurrentResult(){return this.#n}trackResult(e,t){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),t?.(r),e[r])})}),n}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(e){this.#E();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(te)),t}#m(){this.#w();const e=Le(this.options.staleTime,this.#t);if(Re||this.#n.isStale||!fn(e))return;const n=ws(this.#n.dataUpdatedAt,e)+1;this.#l=setTimeout(()=>{this.#n.isStale||this.updateResult()},n)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#g(e){this.#v(),this.#c=e,!(Re||re(this.options.enabled,this.#t)===!1||!fn(this.#c)||this.#c===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||Ln.isFocused())&&this.#u()},this.#c))}#y(){this.#m(),this.#g(this.#b())}#w(){this.#l&&(clearTimeout(this.#l),this.#l=void 0)}#v(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const n=this.#t,r=this.options,s=this.#n,o=this.#i,i=this.#o,c=e!==n?e.state:this.#r,{state:l}=e;let d={...l},u=!1,f;if(t._optimisticResults){const I=this.hasListeners(),N=!I&&Ar(e,t),_=I&&Pr(e,n,t,r);(N||_)&&(d={...d,...Is(l.data,e.options)}),t._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:x,errorUpdatedAt:m,status:h}=d;if(t.select&&d.data!==void 0)if(s&&d.data===o?.data&&t.select===this.#x)f=this.#f;else try{this.#x=t.select,f=t.select(d.data),f=xn(s?.data,f,t),this.#f=f,this.#a=null}catch(I){this.#a=I}else f=d.data;if(t.placeholderData!==void 0&&f===void 0&&h==="pending"){let I;if(s?.isPlaceholderData&&t.placeholderData===i?.placeholderData)I=s.data;else if(I=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,t.select&&I!==void 0)try{I=t.select(I),this.#a=null}catch(N){this.#a=N}I!==void 0&&(h="success",f=xn(s?.data,I,t),u=!0)}this.#a&&(x=this.#a,f=this.#f,m=Date.now(),h="error");const p=d.fetchStatus==="fetching",y=h==="pending",w=h==="error",v=y&&p,E=f!==void 0,T={status:h,fetchStatus:d.fetchStatus,isPending:y,isSuccess:h==="success",isError:w,isInitialLoading:v,isLoading:v,data:f,dataUpdatedAt:d.dataUpdatedAt,error:x,errorUpdatedAt:m,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:p,isRefetching:p&&!y,isLoadingError:w&&!E,isPaused:d.fetchStatus==="paused",isPlaceholderData:u,isRefetchError:w&&E,isStale:$n(e,t),refetch:this.refetch,promise:this.#s};if(this.options.experimental_prefetchInRender){const I=D=>{T.status==="error"?D.reject(T.error):T.data!==void 0&&D.resolve(T.data)},N=()=>{const D=this.#s=T.promise=mn();I(D)},_=this.#s;switch(_.status){case"pending":e.queryHash===n.queryHash&&I(_);break;case"fulfilled":(T.status==="error"||T.data!==_.value)&&N();break;case"rejected":(T.status!=="error"||T.error!==_.reason)&&N();break}}return T}updateResult(e){const t=this.#n,n=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#o=this.options,this.#i.data!==void 0&&(this.#h=this.#t),hn(n,t))return;this.#n=n;const r={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,i=typeof o=="function"?o():o;if(i==="all"||!i&&!this.#p.size)return!0;const a=new Set(i??this.#p);return this.options.throwOnError&&a.add("error"),Object.keys(this.#n).some(c=>{const l=c;return this.#n[l]!==t[l]&&a.has(l)})};e?.listeners!==!1&&s()&&(r.listeners=!0),this.#C({...r,...e})}#E(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#C(e){H.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function La(e,t){return re(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Ar(e,t){return La(e,t)||e.state.data!==void 0&&bn(e,t,t.refetchOnMount)}function bn(e,t,n){if(re(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&$n(e,t)}return!1}function Pr(e,t,n,r){return(e!==t||re(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&$n(e,n)}function $n(e,t){return re(t.enabled,e)!==!1&&e.isStaleByTime(Le(t.staleTime,e))}function $a(e,t){return!hn(e.getCurrentResult(),t)}var As=b.createContext(void 0),Ps=e=>{const t=b.useContext(As);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Ua=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),g.jsx(As.Provider,{value:e,children:t})),ks=b.createContext(!1),qa=()=>b.useContext(ks);ks.Provider;function Ba(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Va=b.createContext(Ba()),za=()=>b.useContext(Va);function Ha(e,t){return typeof e=="function"?e(...t):!!e}function kr(){}var Ka=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Wa=e=>{b.useEffect(()=>{e.clearReset()},[e])},Qa=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Ha(n,[e.error,r]),Ga=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Ya=(e,t)=>e.isLoading&&e.isFetching&&!t,Xa=(e,t)=>e?.suspense&&t.isPending,Or=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Ja(e,t,n){const r=Ps(),s=qa(),o=za(),i=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(i),i._optimisticResults=s?"isRestoring":"optimistic",Ga(i),Ka(i,o),Wa(o);const a=!r.getQueryCache().get(i.queryHash),[c]=b.useState(()=>new t(r,i)),l=c.getOptimisticResult(i);if(b.useSyncExternalStore(b.useCallback(d=>{const u=s?kr:c.subscribe(H.batchCalls(d));return c.updateResult(),u},[c,s]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(i,{listeners:!1})},[i,c]),Xa(i,l))throw Or(i,c,o);if(Qa({result:l,errorResetBoundary:o,throwOnError:i.throwOnError,query:r.getQueryCache().get(i.queryHash)}))throw l.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(i,l),i.experimental_prefetchInRender&&!Re&&Ya(l,s)&&(a?Or(i,c,o):r.getQueryCache().get(i.queryHash)?.promise)?.catch(kr).finally(()=>{c.updateResult()}),i.notifyOnChangeProps?l:c.trackResult(l)}function Za(e,t){return Ja(e,ja)}const ec=()=>async()=>{throw new Error("API calls are not supported in frontend-only mode. Use storage service.")},tc=new Fa({defaultOptions:{queries:{queryFn:ec(),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),nc=1,rc=1e6;let Jt=0;function sc(){return Jt=(Jt+1)%Number.MAX_SAFE_INTEGER,Jt.toString()}const Zt=new Map,Nr=e=>{if(Zt.has(e))return;const t=setTimeout(()=>{Zt.delete(e),Xe({type:"REMOVE_TOAST",toastId:e})},rc);Zt.set(e,t)},oc=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,nc)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Nr(n):e.toasts.forEach(r=>{Nr(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},vt=[];let Et={toasts:[]};function Xe(e){Et=oc(Et,e),vt.forEach(t=>{t(Et)})}function ic({...e}){const t=sc(),n=s=>Xe({type:"UPDATE_TOAST",toast:{...s,id:t}}),r=()=>Xe({type:"DISMISS_TOAST",toastId:t});return Xe({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||r()}}}),{id:t,dismiss:r,update:n}}function ac(){const[e,t]=b.useState(Et);return b.useEffect(()=>(vt.push(t),()=>{const n=vt.indexOf(t);n>-1&&vt.splice(n,1)}),[e]),{...e,toast:ic,dismiss:n=>Xe({type:"DISMISS_TOAST",toastId:n})}}function cc(e){const t=e+"CollectionProvider",[n,r]=Mt(t),[s,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=h=>{const{scope:p,children:y}=h,w=Ee.useRef(null),v=Ee.useRef(new Map).current;return g.jsx(s,{scope:p,itemMap:v,collectionRef:w,children:y})};i.displayName=t;const a=e+"CollectionSlot",c=fr(a),l=Ee.forwardRef((h,p)=>{const{scope:y,children:w}=h,v=o(a,y),E=ge(p,v.collectionRef);return g.jsx(c,{ref:E,children:w})});l.displayName=a;const d=e+"CollectionItemSlot",u="data-radix-collection-item",f=fr(d),x=Ee.forwardRef((h,p)=>{const{scope:y,children:w,...v}=h,E=Ee.useRef(null),C=ge(p,E),T=o(d,y);return Ee.useEffect(()=>(T.itemMap.set(E,{ref:E,...v}),()=>{T.itemMap.delete(E)})),g.jsx(f,{[u]:"",ref:C,children:w})});x.displayName=d;function m(h){const p=o(e+"CollectionConsumer",h);return Ee.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((T,I)=>v.indexOf(T.ref.current)-v.indexOf(I.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:i,Slot:l,ItemSlot:x},m,r]}var lc="VisuallyHidden",jt=b.forwardRef((e,t)=>g.jsx(ae.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));jt.displayName=lc;var dc=jt,Un="ToastProvider",[qn,uc,fc]=cc("Toast"),[Os]=Mt("Toast",[fc]),[hc,Lt]=Os(Un),Ns=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:i}=e,[a,c]=b.useState(null),[l,d]=b.useState(0),u=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Un}\`. Expected non-empty \`string\`.`),g.jsx(qn.Provider,{scope:t,children:g.jsx(hc,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:l,viewport:a,onViewportChange:c,onToastAdd:b.useCallback(()=>d(x=>x+1),[]),onToastRemove:b.useCallback(()=>d(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:f,children:i})})};Ns.displayName=Un;var _s="ToastViewport",pc=["F8"],gn="toast.viewportPause",yn="toast.viewportResume",Ds=b.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=pc,label:s="Notifications ({hotkey})",...o}=e,i=Lt(_s,n),a=uc(n),c=b.useRef(null),l=b.useRef(null),d=b.useRef(null),u=b.useRef(null),f=ge(t,u,i.onViewportChange),x=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=i.toastCount>0;b.useEffect(()=>{const p=y=>{r.length!==0&&r.every(v=>y[v]||y.code===v)&&u.current?.focus()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[r]),b.useEffect(()=>{const p=c.current,y=u.current;if(m&&p&&y){const w=()=>{if(!i.isClosePausedRef.current){const T=new CustomEvent(gn);y.dispatchEvent(T),i.isClosePausedRef.current=!0}},v=()=>{if(i.isClosePausedRef.current){const T=new CustomEvent(yn);y.dispatchEvent(T),i.isClosePausedRef.current=!1}},E=T=>{!p.contains(T.relatedTarget)&&v()},C=()=>{p.contains(document.activeElement)||v()};return p.addEventListener("focusin",w),p.addEventListener("focusout",E),p.addEventListener("pointermove",w),p.addEventListener("pointerleave",C),window.addEventListener("blur",w),window.addEventListener("focus",v),()=>{p.removeEventListener("focusin",w),p.removeEventListener("focusout",E),p.removeEventListener("pointermove",w),p.removeEventListener("pointerleave",C),window.removeEventListener("blur",w),window.removeEventListener("focus",v)}}},[m,i.isClosePausedRef]);const h=b.useCallback(({tabbingDirection:p})=>{const w=a().map(v=>{const E=v.ref.current,C=[E,...Ic(E)];return p==="forwards"?C:C.reverse()});return(p==="forwards"?w.reverse():w).flat()},[a]);return b.useEffect(()=>{const p=u.current;if(p){const y=w=>{const v=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!v){const C=document.activeElement,T=w.shiftKey;if(w.target===p&&T){l.current?.focus();return}const _=h({tabbingDirection:T?"backwards":"forwards"}),D=_.findIndex(O=>O===C);en(_.slice(D+1))?w.preventDefault():T?l.current?.focus():d.current?.focus()}};return p.addEventListener("keydown",y),()=>p.removeEventListener("keydown",y)}},[a,h]),g.jsxs(Ri,{ref:c,role:"region","aria-label":s.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&g.jsx(wn,{ref:l,onFocusFromOutsideViewport:()=>{const p=h({tabbingDirection:"forwards"});en(p)}}),g.jsx(qn.Slot,{scope:n,children:g.jsx(ae.ol,{tabIndex:-1,...o,ref:f})}),m&&g.jsx(wn,{ref:d,onFocusFromOutsideViewport:()=>{const p=h({tabbingDirection:"backwards"});en(p)}})]})});Ds.displayName=_s;var Ms="ToastFocusProxy",wn=b.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,o=Lt(Ms,n);return g.jsx(jt,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:i=>{const a=i.relatedTarget;!o.viewport?.contains(a)&&r()}})});wn.displayName=Ms;var $t="Toast",xc="toast.swipeStart",mc="toast.swipeMove",bc="toast.swipeCancel",gc="toast.swipeEnd",Fs=b.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...i}=e,[a=!0,c]=Si({prop:r,defaultProp:s,onChange:o});return g.jsx(cs,{present:n||a,children:g.jsx(vc,{open:a,...i,ref:t,onClose:()=>c(!1),onPause:Ze(e.onPause),onResume:Ze(e.onResume),onSwipeStart:Q(e.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Q(e.onSwipeMove,l=>{const{x:d,y:u}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${u}px`)}),onSwipeCancel:Q(e.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Q(e.onSwipeEnd,l=>{const{x:d,y:u}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${u}px`),c(!1)})})})});Fs.displayName=$t;var[yc,wc]=Os($t,{onClose(){}}),vc=b.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:i,onEscapeKeyDown:a,onPause:c,onResume:l,onSwipeStart:d,onSwipeMove:u,onSwipeCancel:f,onSwipeEnd:x,...m}=e,h=Lt($t,n),[p,y]=b.useState(null),w=ge(t,R=>y(R)),v=b.useRef(null),E=b.useRef(null),C=s||h.duration,T=b.useRef(0),I=b.useRef(C),N=b.useRef(0),{onToastAdd:_,onToastRemove:D}=h,O=Ze(()=>{p?.contains(document.activeElement)&&h.viewport?.focus(),i()}),A=b.useCallback(R=>{!R||R===1/0||(window.clearTimeout(N.current),T.current=new Date().getTime(),N.current=window.setTimeout(O,R))},[O]);b.useEffect(()=>{const R=h.viewport;if(R){const q=()=>{A(I.current),l?.()},M=()=>{const L=new Date().getTime()-T.current;I.current=I.current-L,window.clearTimeout(N.current),c?.()};return R.addEventListener(gn,M),R.addEventListener(yn,q),()=>{R.removeEventListener(gn,M),R.removeEventListener(yn,q)}}},[h.viewport,C,c,l,A]),b.useEffect(()=>{o&&!h.isClosePausedRef.current&&A(C)},[o,C,h.isClosePausedRef,A]),b.useEffect(()=>(_(),()=>D()),[_,D]);const U=b.useMemo(()=>p?Vs(p):null,[p]);return h.viewport?g.jsxs(g.Fragment,{children:[U&&g.jsx(Ec,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:U}),g.jsx(yc,{scope:n,onClose:O,children:ls.createPortal(g.jsx(qn.ItemSlot,{scope:n,children:g.jsx(Ii,{asChild:!0,onEscapeKeyDown:Q(a,()=>{h.isFocusedToastEscapeKeyDownRef.current||O(),h.isFocusedToastEscapeKeyDownRef.current=!1}),children:g.jsx(ae.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":h.swipeDirection,...m,ref:w,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Q(e.onKeyDown,R=>{R.key==="Escape"&&(a?.(R.nativeEvent),R.nativeEvent.defaultPrevented||(h.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Q(e.onPointerDown,R=>{R.button===0&&(v.current={x:R.clientX,y:R.clientY})}),onPointerMove:Q(e.onPointerMove,R=>{if(!v.current)return;const q=R.clientX-v.current.x,M=R.clientY-v.current.y,L=!!E.current,P=["left","right"].includes(h.swipeDirection),$=["left","up"].includes(h.swipeDirection)?Math.min:Math.max,Y=P?$(0,q):0,X=P?0:$(0,M),Ke=R.pointerType==="touch"?10:2,ke={x:Y,y:X},ft={originalEvent:R,delta:ke};L?(E.current=ke,gt(mc,u,ft,{discrete:!1})):_r(ke,h.swipeDirection,Ke)?(E.current=ke,gt(xc,d,ft,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(q)>Ke||Math.abs(M)>Ke)&&(v.current=null)}),onPointerUp:Q(e.onPointerUp,R=>{const q=E.current,M=R.target;if(M.hasPointerCapture(R.pointerId)&&M.releasePointerCapture(R.pointerId),E.current=null,v.current=null,q){const L=R.currentTarget,P={originalEvent:R,delta:q};_r(q,h.swipeDirection,h.swipeThreshold)?gt(gc,x,P,{discrete:!0}):gt(bc,f,P,{discrete:!0}),L.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),h.viewport)})]}):null}),Ec=e=>{const{__scopeToast:t,children:n,...r}=e,s=Lt($t,t),[o,i]=b.useState(!1),[a,c]=b.useState(!1);return Rc(()=>i(!0)),b.useEffect(()=>{const l=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(l)},[]),a?null:g.jsx(Ai,{asChild:!0,children:g.jsx(jt,{...r,children:o&&g.jsxs(g.Fragment,{children:[s.label," ",n]})})})},Cc="ToastTitle",js=b.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return g.jsx(ae.div,{...r,ref:t})});js.displayName=Cc;var Tc="ToastDescription",Ls=b.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return g.jsx(ae.div,{...r,ref:t})});Ls.displayName=Tc;var $s="ToastAction",Us=b.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?g.jsx(Bs,{altText:n,asChild:!0,children:g.jsx(Bn,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${$s}\`. Expected non-empty \`string\`.`),null)});Us.displayName=$s;var qs="ToastClose",Bn=b.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=wc(qs,n);return g.jsx(Bs,{asChild:!0,children:g.jsx(ae.button,{type:"button",...r,ref:t,onClick:Q(e.onClick,s.onClose)})})});Bn.displayName=qs;var Bs=b.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return g.jsx(ae.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function Vs(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Sc(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const i=r.dataset.radixToastAnnounceAlt;i&&t.push(i)}else t.push(...Vs(r))}}),t}function gt(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Pi(s,o):s.dispatchEvent(o)}var _r=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),o=r>s;return t==="left"||t==="right"?o&&r>n:!o&&s>n};function Rc(e=()=>{}){const t=Ze(e);Tt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Sc(e){return e.nodeType===e.ELEMENT_NODE}function Ic(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function en(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Ac=Ns,zs=Ds,Hs=Fs,Ks=js,Ws=Ls,Qs=Us,Gs=Bn;function Ys(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Ys(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Xs(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Ys(e))&&(r&&(r+=" "),r+=t);return r}const Dr=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Mr=Xs,Pc=(e,t)=>n=>{var r;if(t?.variants==null)return Mr(e,n?.class,n?.className);const{variants:s,defaultVariants:o}=t,i=Object.keys(s).map(l=>{const d=n?.[l],u=o?.[l];if(d===null)return null;const f=Dr(d)||Dr(u);return s[l][f]}),a=n&&Object.entries(n).reduce((l,d)=>{let[u,f]=d;return f===void 0||(l[u]=f),l},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((l,d)=>{let{class:u,className:f,...x}=d;return Object.entries(x).every(m=>{let[h,p]=m;return Array.isArray(p)?p.includes({...o,...a}[h]):{...o,...a}[h]===p})?[...l,u,f]:l},[]);return Mr(e,i,c,n?.class,n?.className)},Vn="-",kc=e=>{const t=Nc(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:i=>{const a=i.split(Vn);return a[0]===""&&a.length!==1&&a.shift(),Js(a,t)||Oc(i)},getConflictingClassGroupIds:(i,a)=>{const c=n[i]||[];return a&&r[i]?[...c,...r[i]]:c}}},Js=(e,t)=>{if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),s=r?Js(e.slice(1),r):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(Vn);return t.validators.find(({validator:i})=>i(o))?.classGroupId},Fr=/^\[(.+)\]$/,Oc=e=>{if(Fr.test(e)){const t=Fr.exec(e)[1],n=t?.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Nc=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Dc(Object.entries(e.classGroups),n).forEach(([o,i])=>{vn(i,r,o,t)}),r},vn=(e,t,n,r)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:jr(t,s);o.classGroupId=n;return}if(typeof s=="function"){if(_c(s)){vn(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,i])=>{vn(i,jr(t,o),n,r)})})},jr=(e,t)=>{let n=e;return t.split(Vn).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},_c=e=>e.isThemeGetter,Dc=(e,t)=>t?e.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([i,a])=>[t+i,a])):o);return[n,s]}):e,Mc=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const s=(o,i)=>{n.set(o,i),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let i=n.get(o);if(i!==void 0)return i;if((i=r.get(o))!==void 0)return s(o,i),i},set(o,i){n.has(o)?n.set(o,i):s(o,i)}}},Zs="!",Fc=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,s=t[0],o=t.length,i=a=>{const c=[];let l=0,d=0,u;for(let p=0;p<a.length;p++){let y=a[p];if(l===0){if(y===s&&(r||a.slice(p,p+o)===t)){c.push(a.slice(d,p)),d=p+o;continue}if(y==="/"){u=p;continue}}y==="["?l++:y==="]"&&l--}const f=c.length===0?a:a.substring(d),x=f.startsWith(Zs),m=x?f.substring(1):f,h=u&&u>d?u-d:void 0;return{modifiers:c,hasImportantModifier:x,baseClassName:m,maybePostfixModifierPosition:h}};return n?a=>n({className:a,parseClassName:i}):i},jc=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},Lc=e=>({cache:Mc(e.cacheSize),parseClassName:Fc(e),...kc(e)}),$c=/\s+/,Uc=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=t,o=[],i=e.trim().split($c);let a="";for(let c=i.length-1;c>=0;c-=1){const l=i[c],{modifiers:d,hasImportantModifier:u,baseClassName:f,maybePostfixModifierPosition:x}=n(l);let m=!!x,h=r(m?f.substring(0,x):f);if(!h){if(!m){a=l+(a.length>0?" "+a:a);continue}if(h=r(f),!h){a=l+(a.length>0?" "+a:a);continue}m=!1}const p=jc(d).join(":"),y=u?p+Zs:p,w=y+h;if(o.includes(w))continue;o.push(w);const v=s(h,m);for(let E=0;E<v.length;++E){const C=v[E];o.push(y+C)}a=l+(a.length>0?" "+a:a)}return a};function qc(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=eo(t))&&(r&&(r+=" "),r+=n);return r}const eo=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=eo(e[r]))&&(n&&(n+=" "),n+=t);return n};function Bc(e,...t){let n,r,s,o=i;function i(c){const l=t.reduce((d,u)=>u(d),e());return n=Lc(l),r=n.cache.get,s=n.cache.set,o=a,a(c)}function a(c){const l=r(c);if(l)return l;const d=Uc(c,n);return s(c,d),d}return function(){return o(qc.apply(null,arguments))}}const B=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},to=/^\[(?:([a-z-]+):)?(.+)\]$/i,Vc=/^\d+\/\d+$/,zc=new Set(["px","full","screen"]),Hc=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Kc=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Wc=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Qc=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Gc=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ue=e=>$e(e)||zc.has(e)||Vc.test(e),xe=e=>Ve(e,"length",rl),$e=e=>!!e&&!Number.isNaN(Number(e)),tn=e=>Ve(e,"number",$e),Qe=e=>!!e&&Number.isInteger(Number(e)),Yc=e=>e.endsWith("%")&&$e(e.slice(0,-1)),k=e=>to.test(e),me=e=>Hc.test(e),Xc=new Set(["length","size","percentage"]),Jc=e=>Ve(e,Xc,no),Zc=e=>Ve(e,"position",no),el=new Set(["image","url"]),tl=e=>Ve(e,el,ol),nl=e=>Ve(e,"",sl),Ge=()=>!0,Ve=(e,t,n)=>{const r=to.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},rl=e=>Kc.test(e)&&!Wc.test(e),no=()=>!1,sl=e=>Qc.test(e),ol=e=>Gc.test(e),il=()=>{const e=B("colors"),t=B("spacing"),n=B("blur"),r=B("brightness"),s=B("borderColor"),o=B("borderRadius"),i=B("borderSpacing"),a=B("borderWidth"),c=B("contrast"),l=B("grayscale"),d=B("hueRotate"),u=B("invert"),f=B("gap"),x=B("gradientColorStops"),m=B("gradientColorStopPositions"),h=B("inset"),p=B("margin"),y=B("opacity"),w=B("padding"),v=B("saturate"),E=B("scale"),C=B("sepia"),T=B("skew"),I=B("space"),N=B("translate"),_=()=>["auto","contain","none"],D=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",k,t],A=()=>[k,t],U=()=>["",ue,xe],R=()=>["auto",$e,k],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",k],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[$e,k];return{cacheSize:500,separator:":",theme:{colors:[Ge],spacing:[ue,xe],blur:["none","",me,k],brightness:X(),borderColor:[e],borderRadius:["none","","full",me,k],borderSpacing:A(),borderWidth:U(),contrast:X(),grayscale:$(),hueRotate:X(),invert:$(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[Yc,xe],inset:O(),margin:O(),opacity:X(),padding:A(),saturate:X(),scale:X(),sepia:$(),skew:X(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",k]}],container:["container"],columns:[{columns:[me]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),k]}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[h]}],"inset-x":[{"inset-x":[h]}],"inset-y":[{"inset-y":[h]}],start:[{start:[h]}],end:[{end:[h]}],top:[{top:[h]}],right:[{right:[h]}],bottom:[{bottom:[h]}],left:[{left:[h]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qe,k]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",k]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Qe,k]}],"grid-cols":[{"grid-cols":[Ge]}],"col-start-end":[{col:["auto",{span:["full",Qe,k]},k]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[Ge]}],"row-start-end":[{row:["auto",{span:[Qe,k]},k]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",k]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",k]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",k,t]}],"min-w":[{"min-w":[k,t,"min","max","fit"]}],"max-w":[{"max-w":[k,t,"none","full","min","max","fit","prose",{screen:[me]},me]}],h:[{h:[k,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[k,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[k,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[k,t,"auto","min","max","fit"]}],"font-size":[{text:["base",me,xe]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",tn]}],"font-family":[{font:[Ge]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",k]}],"line-clamp":[{"line-clamp":["none",$e,tn]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ue,k]}],"list-image":[{"list-image":["none",k]}],"list-style-type":[{list:["none","disc","decimal",k]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ue,xe]}],"underline-offset":[{"underline-offset":["auto",ue,k]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",k]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",k]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),Zc]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Jc]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},tl]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:M()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[ue,k]}],"outline-w":[{outline:[ue,xe]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[ue,xe]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",me,nl]}],"shadow-color":[{shadow:[Ge]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",me,k]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[v]}],sepia:[{sepia:[C]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[C]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",k]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",k]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",k]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Qe,k]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",k]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",k]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",k]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ue,xe,tn]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},al=Bc(il);function Pe(...e){return al(Xs(e))}function De(e){const t=String(e||"").trim().toLowerCase();if(!t)return null;const n=t.match(/^([a-z])$/);if(n)return`Block ${n[1].toUpperCase()}`;const r=t.match(/^(?:block|tower|wing)\s*([a-z])$/i);return r?`Block ${r[1].toUpperCase()}`:null}const cl=Ac,ro=b.forwardRef(({className:e,...t},n)=>g.jsx(zs,{ref:n,className:Pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));ro.displayName=zs.displayName;const ll=Pc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),so=b.forwardRef(({className:e,variant:t,...n},r)=>g.jsx(Hs,{ref:r,className:Pe(ll({variant:t}),e),...n}));so.displayName=Hs.displayName;const dl=b.forwardRef(({className:e,...t},n)=>g.jsx(Qs,{ref:n,className:Pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));dl.displayName=Qs.displayName;const oo=b.forwardRef(({className:e,...t},n)=>g.jsx(Gs,{ref:n,className:Pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:g.jsx(ki,{className:"h-4 w-4"})}));oo.displayName=Gs.displayName;const io=b.forwardRef(({className:e,...t},n)=>g.jsx(Ks,{ref:n,className:Pe("text-sm font-semibold",e),...t}));io.displayName=Ks.displayName;const ao=b.forwardRef(({className:e,...t},n)=>g.jsx(Ws,{ref:n,className:Pe("text-sm opacity-90",e),...t}));ao.displayName=Ws.displayName;function ul(){const{toasts:e}=ac();return g.jsxs(cl,{children:[e.map(function({id:t,title:n,description:r,action:s,...o}){return g.jsxs(so,{...o,children:[g.jsxs("div",{className:"grid gap-1",children:[n&&g.jsx(io,{children:n}),r&&g.jsx(ao,{children:r})]}),s,g.jsx(oo,{})]},t)}),g.jsx(ro,{})]})}const fl=["top","right","bottom","left"],ye=Math.min,Z=Math.max,Pt=Math.round,yt=Math.floor,ce=e=>({x:e,y:e}),hl={left:"right",right:"left",bottom:"top",top:"bottom"},pl={start:"end",end:"start"};function En(e,t,n){return Z(e,ye(t,n))}function he(e,t){return typeof e=="function"?e(t):e}function pe(e){return e.split("-")[0]}function ze(e){return e.split("-")[1]}function zn(e){return e==="x"?"y":"x"}function Hn(e){return e==="y"?"height":"width"}function we(e){return["top","bottom"].includes(pe(e))?"y":"x"}function Kn(e){return zn(we(e))}function xl(e,t,n){n===void 0&&(n=!1);const r=ze(e),s=Kn(e),o=Hn(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(i=kt(i)),[i,kt(i)]}function ml(e){const t=kt(e);return[Cn(e),t,Cn(t)]}function Cn(e){return e.replace(/start|end/g,t=>pl[t])}function bl(e,t,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:r:t?r:s;case"left":case"right":return t?o:i;default:return[]}}function gl(e,t,n,r){const s=ze(e);let o=bl(pe(e),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),t&&(o=o.concat(o.map(Cn)))),o}function kt(e){return e.replace(/left|right|bottom|top/g,t=>hl[t])}function yl(e){return{top:0,right:0,bottom:0,left:0,...e}}function co(e){return typeof e!="number"?yl(e):{top:e,right:e,bottom:e,left:e}}function Ot(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function Lr(e,t,n){let{reference:r,floating:s}=e;const o=we(t),i=Kn(t),a=Hn(i),c=pe(t),l=o==="y",d=r.x+r.width/2-s.width/2,u=r.y+r.height/2-s.height/2,f=r[a]/2-s[a]/2;let x;switch(c){case"top":x={x:d,y:r.y-s.height};break;case"bottom":x={x:d,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:u};break;case"left":x={x:r.x-s.width,y:u};break;default:x={x:r.x,y:r.y}}switch(ze(t)){case"start":x[i]-=f*(n&&l?-1:1);break;case"end":x[i]+=f*(n&&l?-1:1);break}return x}const wl=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,a=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let l=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:u}=Lr(l,r,c),f=r,x={},m=0;for(let h=0;h<a.length;h++){const{name:p,fn:y}=a[h],{x:w,y:v,data:E,reset:C}=await y({x:d,y:u,initialPlacement:r,placement:f,strategy:s,middlewareData:x,rects:l,platform:i,elements:{reference:e,floating:t}});d=w??d,u=v??u,x={...x,[p]:{...x[p],...E}},C&&m<=50&&(m++,typeof C=="object"&&(C.placement&&(f=C.placement),C.rects&&(l=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):C.rects),{x:d,y:u}=Lr(l,f,c)),h=-1)}return{x:d,y:u,placement:f,strategy:s,middlewareData:x}};async function nt(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:o,rects:i,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:f=!1,padding:x=0}=he(t,e),m=co(x),p=a[f?u==="floating"?"reference":"floating":u],y=Ot(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(p)))==null||n?p:p.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:d,strategy:c})),w=u==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,v=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),E=await(o.isElement==null?void 0:o.isElement(v))?await(o.getScale==null?void 0:o.getScale(v))||{x:1,y:1}:{x:1,y:1},C=Ot(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:v,strategy:c}):w);return{top:(y.top-C.top+m.top)/E.y,bottom:(C.bottom-y.bottom+m.bottom)/E.y,left:(y.left-C.left+m.left)/E.x,right:(C.right-y.right+m.right)/E.x}}const vl=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:o,platform:i,elements:a,middlewareData:c}=t,{element:l,padding:d=0}=he(e,t)||{};if(l==null)return{};const u=co(d),f={x:n,y:r},x=Kn(s),m=Hn(x),h=await i.getDimensions(l),p=x==="y",y=p?"top":"left",w=p?"bottom":"right",v=p?"clientHeight":"clientWidth",E=o.reference[m]+o.reference[x]-f[x]-o.floating[m],C=f[x]-o.reference[x],T=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l));let I=T?T[v]:0;(!I||!await(i.isElement==null?void 0:i.isElement(T)))&&(I=a.floating[v]||o.floating[m]);const N=E/2-C/2,_=I/2-h[m]/2-1,D=ye(u[y],_),O=ye(u[w],_),A=D,U=I-h[m]-O,R=I/2-h[m]/2+N,q=En(A,R,U),M=!c.arrow&&ze(s)!=null&&R!==q&&o.reference[m]/2-(R<A?D:O)-h[m]/2<0,L=M?R<A?R-A:R-U:0;return{[x]:f[x]+L,data:{[x]:q,centerOffset:R-q-L,...M&&{alignmentOffset:L}},reset:M}}}),El=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:d=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:h=!0,...p}=he(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const y=pe(s),w=we(a),v=pe(a)===a,E=await(c.isRTL==null?void 0:c.isRTL(l.floating)),C=f||(v||!h?[kt(a)]:ml(a)),T=m!=="none";!f&&T&&C.push(...gl(a,h,m,E));const I=[a,...C],N=await nt(t,p),_=[];let D=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&_.push(N[y]),u){const R=xl(s,i,E);_.push(N[R[0]],N[R[1]])}if(D=[...D,{placement:s,overflows:_}],!_.every(R=>R<=0)){var O,A;const R=(((O=o.flip)==null?void 0:O.index)||0)+1,q=I[R];if(q)return{data:{index:R,overflows:D},reset:{placement:q}};let M=(A=D.filter(L=>L.overflows[0]<=0).sort((L,P)=>L.overflows[1]-P.overflows[1])[0])==null?void 0:A.placement;if(!M)switch(x){case"bestFit":{var U;const L=(U=D.filter(P=>{if(T){const $=we(P.placement);return $===w||$==="y"}return!0}).map(P=>[P.placement,P.overflows.filter($=>$>0).reduce(($,Y)=>$+Y,0)]).sort((P,$)=>P[1]-$[1])[0])==null?void 0:U[0];L&&(M=L);break}case"initialPlacement":M=a;break}if(s!==M)return{reset:{placement:M}}}return{}}}};function $r(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Ur(e){return fl.some(t=>e[t]>=0)}const Cl=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=he(e,t);switch(r){case"referenceHidden":{const o=await nt(t,{...s,elementContext:"reference"}),i=$r(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Ur(i)}}}case"escaped":{const o=await nt(t,{...s,altBoundary:!0}),i=$r(o,n.floating);return{data:{escapedOffsets:i,escaped:Ur(i)}}}default:return{}}}}};async function Tl(e,t){const{placement:n,platform:r,elements:s}=e,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=pe(n),a=ze(n),c=we(n)==="y",l=["left","top"].includes(i)?-1:1,d=o&&c?-1:1,u=he(t,e);let{mainAxis:f,crossAxis:x,alignmentAxis:m}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return a&&typeof m=="number"&&(x=a==="end"?m*-1:m),c?{x:x*d,y:f*l}:{x:f*l,y:x*d}}const Rl=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:o,placement:i,middlewareData:a}=t,c=await Tl(t,e);return i===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:i}}}}},Sl=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:o=!0,crossAxis:i=!1,limiter:a={fn:p=>{let{x:y,y:w}=p;return{x:y,y:w}}},...c}=he(e,t),l={x:n,y:r},d=await nt(t,c),u=we(pe(s)),f=zn(u);let x=l[f],m=l[u];if(o){const p=f==="y"?"top":"left",y=f==="y"?"bottom":"right",w=x+d[p],v=x-d[y];x=En(w,x,v)}if(i){const p=u==="y"?"top":"left",y=u==="y"?"bottom":"right",w=m+d[p],v=m-d[y];m=En(w,m,v)}const h=a.fn({...t,[f]:x,[u]:m});return{...h,data:{x:h.x-n,y:h.y-r,enabled:{[f]:o,[u]:i}}}}}},Il=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=t,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=he(e,t),d={x:n,y:r},u=we(s),f=zn(u);let x=d[f],m=d[u];const h=he(a,t),p=typeof h=="number"?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(c){const v=f==="y"?"height":"width",E=o.reference[f]-o.floating[v]+p.mainAxis,C=o.reference[f]+o.reference[v]-p.mainAxis;x<E?x=E:x>C&&(x=C)}if(l){var y,w;const v=f==="y"?"width":"height",E=["top","left"].includes(pe(s)),C=o.reference[u]-o.floating[v]+(E&&((y=i.offset)==null?void 0:y[u])||0)+(E?0:p.crossAxis),T=o.reference[u]+o.reference[v]+(E?0:((w=i.offset)==null?void 0:w[u])||0)-(E?p.crossAxis:0);m<C?m=C:m>T&&(m=T)}return{[f]:x,[u]:m}}}},Al=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:o,platform:i,elements:a}=t,{apply:c=()=>{},...l}=he(e,t),d=await nt(t,l),u=pe(s),f=ze(s),x=we(s)==="y",{width:m,height:h}=o.floating;let p,y;u==="top"||u==="bottom"?(p=u,y=f===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(y=u,p=f==="end"?"top":"bottom");const w=h-d.top-d.bottom,v=m-d.left-d.right,E=ye(h-d[p],w),C=ye(m-d[y],v),T=!t.middlewareData.shift;let I=E,N=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=v),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(I=w),T&&!f){const D=Z(d.left,0),O=Z(d.right,0),A=Z(d.top,0),U=Z(d.bottom,0);x?N=m-2*(D!==0||O!==0?D+O:Z(d.left,d.right)):I=h-2*(A!==0||U!==0?A+U:Z(d.top,d.bottom))}await c({...t,availableWidth:N,availableHeight:I});const _=await i.getDimensions(a.floating);return m!==_.width||h!==_.height?{reset:{rects:!0}}:{}}}};function Ut(){return typeof window<"u"}function He(e){return lo(e)?(e.nodeName||"").toLowerCase():"#document"}function ee(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function de(e){var t;return(t=(lo(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function lo(e){return Ut()?e instanceof Node||e instanceof ee(e).Node:!1}function oe(e){return Ut()?e instanceof Element||e instanceof ee(e).Element:!1}function le(e){return Ut()?e instanceof HTMLElement||e instanceof ee(e).HTMLElement:!1}function qr(e){return!Ut()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ee(e).ShadowRoot}function ut(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=ie(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function Pl(e){return["table","td","th"].includes(He(e))}function qt(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Wn(e){const t=Qn(),n=oe(e)?ie(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function kl(e){let t=ve(e);for(;le(t)&&!qe(t);){if(Wn(t))return t;if(qt(t))return null;t=ve(t)}return null}function Qn(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function qe(e){return["html","body","#document"].includes(He(e))}function ie(e){return ee(e).getComputedStyle(e)}function Bt(e){return oe(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ve(e){if(He(e)==="html")return e;const t=e.assignedSlot||e.parentNode||qr(e)&&e.host||de(e);return qr(t)?t.host:t}function uo(e){const t=ve(e);return qe(t)?e.ownerDocument?e.ownerDocument.body:e.body:le(t)&&ut(t)?t:uo(t)}function rt(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=uo(e),o=s===((r=e.ownerDocument)==null?void 0:r.body),i=ee(s);if(o){const a=Tn(i);return t.concat(i,i.visualViewport||[],ut(s)?s:[],a&&n?rt(a):[])}return t.concat(s,rt(s,[],n))}function Tn(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function fo(e){const t=ie(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=le(e),o=s?e.offsetWidth:n,i=s?e.offsetHeight:r,a=Pt(n)!==o||Pt(r)!==i;return a&&(n=o,r=i),{width:n,height:r,$:a}}function Gn(e){return oe(e)?e:e.contextElement}function Ue(e){const t=Gn(e);if(!le(t))return ce(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:o}=fo(t);let i=(o?Pt(n.width):n.width)/r,a=(o?Pt(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!a||!Number.isFinite(a))&&(a=1),{x:i,y:a}}const Ol=ce(0);function ho(e){const t=ee(e);return!Qn()||!t.visualViewport?Ol:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Nl(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ee(e)?!1:t}function Se(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),o=Gn(e);let i=ce(1);t&&(r?oe(r)&&(i=Ue(r)):i=Ue(e));const a=Nl(o,n,r)?ho(o):ce(0);let c=(s.left+a.x)/i.x,l=(s.top+a.y)/i.y,d=s.width/i.x,u=s.height/i.y;if(o){const f=ee(o),x=r&&oe(r)?ee(r):r;let m=f,h=Tn(m);for(;h&&r&&x!==m;){const p=Ue(h),y=h.getBoundingClientRect(),w=ie(h),v=y.left+(h.clientLeft+parseFloat(w.paddingLeft))*p.x,E=y.top+(h.clientTop+parseFloat(w.paddingTop))*p.y;c*=p.x,l*=p.y,d*=p.x,u*=p.y,c+=v,l+=E,m=ee(h),h=Tn(m)}}return Ot({width:d,height:u,x:c,y:l})}function Yn(e,t){const n=Bt(e).scrollLeft;return t?t.left+n:Se(de(e)).left+n}function po(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:Yn(e,r)),o=r.top+t.scrollTop;return{x:s,y:o}}function _l(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const o=s==="fixed",i=de(r),a=t?qt(t.floating):!1;if(r===i||a&&o)return n;let c={scrollLeft:0,scrollTop:0},l=ce(1);const d=ce(0),u=le(r);if((u||!u&&!o)&&((He(r)!=="body"||ut(i))&&(c=Bt(r)),le(r))){const x=Se(r);l=Ue(r),d.x=x.x+r.clientLeft,d.y=x.y+r.clientTop}const f=i&&!u&&!o?po(i,c,!0):ce(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+d.x+f.x,y:n.y*l.y-c.scrollTop*l.y+d.y+f.y}}function Dl(e){return Array.from(e.getClientRects())}function Ml(e){const t=de(e),n=Bt(e),r=e.ownerDocument.body,s=Z(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Z(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+Yn(e);const a=-n.scrollTop;return ie(r).direction==="rtl"&&(i+=Z(t.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:a}}function Fl(e,t){const n=ee(e),r=de(e),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,a=0,c=0;if(s){o=s.width,i=s.height;const l=Qn();(!l||l&&t==="fixed")&&(a=s.offsetLeft,c=s.offsetTop)}return{width:o,height:i,x:a,y:c}}function jl(e,t){const n=Se(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,o=le(e)?Ue(e):ce(1),i=e.clientWidth*o.x,a=e.clientHeight*o.y,c=s*o.x,l=r*o.y;return{width:i,height:a,x:c,y:l}}function Br(e,t,n){let r;if(t==="viewport")r=Fl(e,n);else if(t==="document")r=Ml(de(e));else if(oe(t))r=jl(t,n);else{const s=ho(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Ot(r)}function xo(e,t){const n=ve(e);return n===t||!oe(n)||qe(n)?!1:ie(n).position==="fixed"||xo(n,t)}function Ll(e,t){const n=t.get(e);if(n)return n;let r=rt(e,[],!1).filter(a=>oe(a)&&He(a)!=="body"),s=null;const o=ie(e).position==="fixed";let i=o?ve(e):e;for(;oe(i)&&!qe(i);){const a=ie(i),c=Wn(i);!c&&a.position==="fixed"&&(s=null),(o?!c&&!s:!c&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ut(i)&&!c&&xo(e,i))?r=r.filter(d=>d!==i):s=a,i=ve(i)}return t.set(e,r),r}function $l(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?qt(t)?[]:Ll(t,this._c):[].concat(n),r],a=i[0],c=i.reduce((l,d)=>{const u=Br(t,d,s);return l.top=Z(u.top,l.top),l.right=ye(u.right,l.right),l.bottom=ye(u.bottom,l.bottom),l.left=Z(u.left,l.left),l},Br(t,a,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Ul(e){const{width:t,height:n}=fo(e);return{width:t,height:n}}function ql(e,t,n){const r=le(t),s=de(t),o=n==="fixed",i=Se(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const c=ce(0);if(r||!r&&!o)if((He(t)!=="body"||ut(s))&&(a=Bt(t)),r){const f=Se(t,!0,o,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else s&&(c.x=Yn(s));const l=s&&!r&&!o?po(s,a):ce(0),d=i.left+a.scrollLeft-c.x-l.x,u=i.top+a.scrollTop-c.y-l.y;return{x:d,y:u,width:i.width,height:i.height}}function nn(e){return ie(e).position==="static"}function Vr(e,t){if(!le(e)||ie(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return de(e)===n&&(n=n.ownerDocument.body),n}function mo(e,t){const n=ee(e);if(qt(e))return n;if(!le(e)){let s=ve(e);for(;s&&!qe(s);){if(oe(s)&&!nn(s))return s;s=ve(s)}return n}let r=Vr(e,t);for(;r&&Pl(r)&&nn(r);)r=Vr(r,t);return r&&qe(r)&&nn(r)&&!Wn(r)?n:r||kl(e)||n}const Bl=async function(e){const t=this.getOffsetParent||mo,n=this.getDimensions,r=await n(e.floating);return{reference:ql(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Vl(e){return ie(e).direction==="rtl"}const zl={convertOffsetParentRelativeRectToViewportRelativeRect:_l,getDocumentElement:de,getClippingRect:$l,getOffsetParent:mo,getElementRects:Bl,getClientRects:Dl,getDimensions:Ul,getScale:Ue,isElement:oe,isRTL:Vl};function bo(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Hl(e,t){let n=null,r;const s=de(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function i(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),o();const l=e.getBoundingClientRect(),{left:d,top:u,width:f,height:x}=l;if(a||t(),!f||!x)return;const m=yt(u),h=yt(s.clientWidth-(d+f)),p=yt(s.clientHeight-(u+x)),y=yt(d),v={rootMargin:-m+"px "+-h+"px "+-p+"px "+-y+"px",threshold:Z(0,ye(1,c))||1};let E=!0;function C(T){const I=T[0].intersectionRatio;if(I!==c){if(!E)return i();I?i(!1,I):r=setTimeout(()=>{i(!1,1e-7)},1e3)}I===1&&!bo(l,e.getBoundingClientRect())&&i(),E=!1}try{n=new IntersectionObserver(C,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,v)}n.observe(e)}return i(!0),o}function Kl(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=Gn(e),d=s||o?[...l?rt(l):[],...rt(t)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),o&&y.addEventListener("resize",n)});const u=l&&a?Hl(l,n):null;let f=-1,x=null;i&&(x=new ResizeObserver(y=>{let[w]=y;w&&w.target===l&&x&&(x.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var v;(v=x)==null||v.observe(t)})),n()}),l&&!c&&x.observe(l),x.observe(t));let m,h=c?Se(e):null;c&&p();function p(){const y=Se(e);h&&!bo(h,y)&&n(),h=y,m=requestAnimationFrame(p)}return n(),()=>{var y;d.forEach(w=>{s&&w.removeEventListener("scroll",n),o&&w.removeEventListener("resize",n)}),u?.(),(y=x)==null||y.disconnect(),x=null,c&&cancelAnimationFrame(m)}}const Wl=Rl,Ql=Sl,Gl=El,Yl=Al,Xl=Cl,zr=vl,Jl=Il,Zl=(e,t,n)=>{const r=new Map,s={platform:zl,...n},o={...s.platform,_c:r};return wl(e,t,{...s,platform:o})};var Ct=typeof document<"u"?b.useLayoutEffect:b.useEffect;function Nt(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Nt(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&e.$$typeof)&&!Nt(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function go(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Hr(e,t){const n=go(e);return Math.round(t*n)/n}function rn(e){const t=b.useRef(e);return Ct(()=>{t.current=e}),t}function ed(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:a=!0,whileElementsMounted:c,open:l}=e,[d,u]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,x]=b.useState(r);Nt(f,r)||x(r);const[m,h]=b.useState(null),[p,y]=b.useState(null),w=b.useCallback(P=>{P!==T.current&&(T.current=P,h(P))},[]),v=b.useCallback(P=>{P!==I.current&&(I.current=P,y(P))},[]),E=o||m,C=i||p,T=b.useRef(null),I=b.useRef(null),N=b.useRef(d),_=c!=null,D=rn(c),O=rn(s),A=rn(l),U=b.useCallback(()=>{if(!T.current||!I.current)return;const P={placement:t,strategy:n,middleware:f};O.current&&(P.platform=O.current),Zl(T.current,I.current,P).then($=>{const Y={...$,isPositioned:A.current!==!1};R.current&&!Nt(N.current,Y)&&(N.current=Y,ls.flushSync(()=>{u(Y)}))})},[f,t,n,O,A]);Ct(()=>{l===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,u(P=>({...P,isPositioned:!1})))},[l]);const R=b.useRef(!1);Ct(()=>(R.current=!0,()=>{R.current=!1}),[]),Ct(()=>{if(E&&(T.current=E),C&&(I.current=C),E&&C){if(D.current)return D.current(E,C,U);U()}},[E,C,U,D,_]);const q=b.useMemo(()=>({reference:T,floating:I,setReference:w,setFloating:v}),[w,v]),M=b.useMemo(()=>({reference:E,floating:C}),[E,C]),L=b.useMemo(()=>{const P={position:n,left:0,top:0};if(!M.floating)return P;const $=Hr(M.floating,d.x),Y=Hr(M.floating,d.y);return a?{...P,transform:"translate("+$+"px, "+Y+"px)",...go(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:Y}},[n,a,M.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:U,refs:q,elements:M,floatingStyles:L}),[d,U,q,M,L])}const td=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?zr({element:r.current,padding:s}).fn(n):{}:r?zr({element:r,padding:s}).fn(n):{}}}},nd=(e,t)=>({...Wl(e),options:[e,t]}),rd=(e,t)=>({...Ql(e),options:[e,t]}),sd=(e,t)=>({...Jl(e),options:[e,t]}),od=(e,t)=>({...Gl(e),options:[e,t]}),id=(e,t)=>({...Yl(e),options:[e,t]}),ad=(e,t)=>({...Xl(e),options:[e,t]}),cd=(e,t)=>({...td(e),options:[e,t]});var ld="Arrow",yo=b.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...o}=e;return g.jsx(ae.svg,{...o,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:g.jsx("polygon",{points:"0,0 30,0 15,10"})})});yo.displayName=ld;var dd=yo;function ud(e){const[t,n]=b.useState(void 0);return Tt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,a;if("borderBoxSize"in o){const c=o.borderBoxSize,l=Array.isArray(c)?c[0]:c;i=l.inlineSize,a=l.blockSize}else i=e.offsetWidth,a=e.offsetHeight;n({width:i,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Xn="Popper",[wo,vo]=Mt(Xn),[fd,Eo]=wo(Xn),Co=e=>{const{__scopePopper:t,children:n}=e,[r,s]=b.useState(null);return g.jsx(fd,{scope:t,anchor:r,onAnchorChange:s,children:n})};Co.displayName=Xn;var To="PopperAnchor",Ro=b.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,o=Eo(To,n),i=b.useRef(null),a=ge(t,i);return b.useEffect(()=>{o.onAnchorChange(r?.current||i.current)}),r?null:g.jsx(ae.div,{...s,ref:a})});Ro.displayName=To;var Jn="PopperContent",[hd,pd]=wo(Jn),So=b.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:d=0,sticky:u="partial",hideWhenDetached:f=!1,updatePositionStrategy:x="optimized",onPlaced:m,...h}=e,p=Eo(Jn,n),[y,w]=b.useState(null),v=ge(t,We=>w(We)),[E,C]=b.useState(null),T=ud(E),I=T?.width??0,N=T?.height??0,_=r+(o!=="center"?"-"+o:""),D=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(l)?l:[l],A=O.length>0,U={padding:D,boundary:O.filter(md),altBoundary:A},{refs:R,floatingStyles:q,placement:M,isPositioned:L,middlewareData:P}=ed({strategy:"fixed",placement:_,whileElementsMounted:(...We)=>Kl(...We,{animationFrame:x==="always"}),elements:{reference:p.anchor},middleware:[nd({mainAxis:s+N,alignmentAxis:i}),c&&rd({mainAxis:!0,crossAxis:!1,limiter:u==="partial"?sd():void 0,...U}),c&&od({...U}),id({...U,apply:({elements:We,rects:ur,availableWidth:wi,availableHeight:vi})=>{const{width:Ei,height:Ci}=ur.reference,ht=We.floating.style;ht.setProperty("--radix-popper-available-width",`${wi}px`),ht.setProperty("--radix-popper-available-height",`${vi}px`),ht.setProperty("--radix-popper-anchor-width",`${Ei}px`),ht.setProperty("--radix-popper-anchor-height",`${Ci}px`)}}),E&&cd({element:E,padding:a}),bd({arrowWidth:I,arrowHeight:N}),f&&ad({strategy:"referenceHidden",...U})]}),[$,Y]=Po(M),X=Ze(m);Tt(()=>{L&&X?.()},[L,X]);const Ke=P.arrow?.x,ke=P.arrow?.y,ft=P.arrow?.centerOffset!==0,[gi,yi]=b.useState();return Tt(()=>{y&&yi(window.getComputedStyle(y).zIndex)},[y]),g.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:L?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:gi,"--radix-popper-transform-origin":[P.transformOrigin?.x,P.transformOrigin?.y].join(" "),...P.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:g.jsx(hd,{scope:n,placedSide:$,onArrowChange:C,arrowX:Ke,arrowY:ke,shouldHideArrow:ft,children:g.jsx(ae.div,{"data-side":$,"data-align":Y,...h,ref:v,style:{...h.style,animation:L?void 0:"none"}})})})});So.displayName=Jn;var Io="PopperArrow",xd={top:"bottom",right:"left",bottom:"top",left:"right"},Ao=b.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,o=pd(Io,r),i=xd[o.placedSide];return g.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:g.jsx(dd,{...s,ref:n,style:{...s.style,display:"block"}})})});Ao.displayName=Io;function md(e){return e!==null}var bd=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,i=s.arrow?.centerOffset!==0,a=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[l,d]=Po(n),u={start:"0%",center:"50%",end:"100%"}[d],f=(s.arrow?.x??0)+a/2,x=(s.arrow?.y??0)+c/2;let m="",h="";return l==="bottom"?(m=i?u:`${f}px`,h=`${-c}px`):l==="top"?(m=i?u:`${f}px`,h=`${r.floating.height+c}px`):l==="right"?(m=`${-c}px`,h=i?u:`${x}px`):l==="left"&&(m=`${r.floating.width+c}px`,h=i?u:`${x}px`),{data:{x:m,y:h}}}});function Po(e){const[t,n="center"]=e.split("-");return[t,n]}var Yf=Co,gd=Ro,yd=So,wd=Ao,[Vt]=Mt("Tooltip",[vo]),Zn=vo(),ko="TooltipProvider",vd=700,Kr="tooltip.open",[Ed,Oo]=Vt(ko),No=e=>{const{__scopeTooltip:t,delayDuration:n=vd,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,i=b.useRef(!0),a=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const l=c.current;return()=>window.clearTimeout(l)},[]),g.jsx(Ed,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:b.useCallback(l=>{a.current=l},[]),disableHoverableContent:s,children:o})};No.displayName=ko;var _o="Tooltip",[Xf,zt]=Vt(_o),Rn="TooltipTrigger",Cd=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=zt(Rn,n),o=Oo(Rn,n),i=Zn(n),a=b.useRef(null),c=ge(t,a,s.onTriggerChange),l=b.useRef(!1),d=b.useRef(!1),u=b.useCallback(()=>l.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),g.jsx(gd,{asChild:!0,...i,children:g.jsx(ae.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Q(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:Q(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:Q(e.onPointerDown,()=>{s.open&&s.onClose(),l.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:Q(e.onFocus,()=>{l.current||s.onOpen()}),onBlur:Q(e.onBlur,s.onClose),onClick:Q(e.onClick,s.onClose)})})});Cd.displayName=Rn;var Td="TooltipPortal",[Jf,Rd]=Vt(Td,{forceMount:void 0}),Be="TooltipContent",Do=b.forwardRef((e,t)=>{const n=Rd(Be,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=e,i=zt(Be,e.__scopeTooltip);return g.jsx(cs,{present:r||i.open,children:i.disableHoverableContent?g.jsx(Mo,{side:s,...o,ref:t}):g.jsx(Sd,{side:s,...o,ref:t})})}),Sd=b.forwardRef((e,t)=>{const n=zt(Be,e.__scopeTooltip),r=Oo(Be,e.__scopeTooltip),s=b.useRef(null),o=ge(t,s),[i,a]=b.useState(null),{trigger:c,onClose:l}=n,d=s.current,{onPointerInTransitChange:u}=r,f=b.useCallback(()=>{a(null),u(!1)},[u]),x=b.useCallback((m,h)=>{const p=m.currentTarget,y={x:m.clientX,y:m.clientY},w=Od(y,p.getBoundingClientRect()),v=Nd(y,w),E=_d(h.getBoundingClientRect()),C=Md([...v,...E]);a(C),u(!0)},[u]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(c&&d){const m=p=>x(p,d),h=p=>x(p,c);return c.addEventListener("pointerleave",m),d.addEventListener("pointerleave",h),()=>{c.removeEventListener("pointerleave",m),d.removeEventListener("pointerleave",h)}}},[c,d,x,f]),b.useEffect(()=>{if(i){const m=h=>{const p=h.target,y={x:h.clientX,y:h.clientY},w=c?.contains(p)||d?.contains(p),v=!Dd(y,i);w?f():v&&(f(),l())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[c,d,i,l,f]),g.jsx(Mo,{...e,ref:o})}),[Id,Ad]=Vt(_o,{isInside:!1}),Pd=Ni("TooltipContent"),Mo=b.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:i,...a}=e,c=zt(Be,n),l=Zn(n),{onClose:d}=c;return b.useEffect(()=>(document.addEventListener(Kr,d),()=>document.removeEventListener(Kr,d)),[d]),b.useEffect(()=>{if(c.trigger){const u=f=>{f.target?.contains(c.trigger)&&d()};return window.addEventListener("scroll",u,{capture:!0}),()=>window.removeEventListener("scroll",u,{capture:!0})}},[c.trigger,d]),g.jsx(Oi,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:u=>u.preventDefault(),onDismiss:d,children:g.jsxs(yd,{"data-state":c.stateAttribute,...l,...a,ref:t,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[g.jsx(Pd,{children:r}),g.jsx(Id,{scope:n,isInside:!0,children:g.jsx(dc,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Do.displayName=Be;var Fo="TooltipArrow",kd=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Zn(n);return Ad(Fo,n).isInside?null:g.jsx(wd,{...s,...r,ref:t})});kd.displayName=Fo;function Od(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Nd(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function _d(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function Dd(e,t){const{x:n,y:r}=e;let s=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const a=t[o].x,c=t[o].y,l=t[i].x,d=t[i].y;c>r!=d>r&&n<(l-a)*(r-c)/(d-c)+a&&(s=!s)}return s}function Md(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Fd(t)}function Fd(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const o=t[t.length-1],i=t[t.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var jd=No,jo=Do;const Ld=jd,$d=b.forwardRef(({className:e,sideOffset:t=4,...n},r)=>g.jsx(jo,{ref:r,sideOffset:t,className:Pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));$d.displayName=jo.displayName;const Ud={apiKey:"AIzaSyBTwsbAP2oJ0Y35-F6azy-BG4lCpWoQzx0",authDomain:"visitsafe-3b609.firebaseapp.com",projectId:"visitsafe-3b609",storageBucket:"visitsafe-3b609.firebasestorage.app",messagingSenderId:"457616438306",appId:"1:457616438306:web:6796565799e0ce2620867b"},er=Fi(Ud),Lo=ji(er);Li(Lo,Ui).catch(()=>{});const S=$i(er),qd={};var Sn=null;function Bd(e){try{return crypto.getRandomValues(new Uint8Array(e))}catch{}try{return qd.randomBytes(e)}catch{}if(!Sn)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return Sn(e)}function Vd(e){Sn=e}function tr(e,t){if(e=e||nr,typeof e!="number")throw Error("Illegal arguments: "+typeof e+", "+typeof t);e<4?e=4:e>31&&(e=31);var n=[];return n.push("$2b$"),e<10&&n.push("0"),n.push(e.toString()),n.push("$"),n.push(_t(Bd(st),st)),n.join("")}function $o(e,t,n){if(typeof t=="function"&&(n=t,t=void 0),typeof e=="function"&&(n=e,e=void 0),typeof e>"u")e=nr;else if(typeof e!="number")throw Error("illegal arguments: "+typeof e);function r(s){se(function(){try{s(null,tr(e))}catch(o){s(o)}})}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);r(n)}else return new Promise(function(s,o){r(function(i,a){if(i){o(i);return}s(a)})})}function Uo(e,t){if(typeof t>"u"&&(t=nr),typeof t=="number"&&(t=tr(t)),typeof e!="string"||typeof t!="string")throw Error("Illegal arguments: "+typeof e+", "+typeof t);return In(e,t)}function qo(e,t,n,r){function s(o){typeof e=="string"&&typeof t=="number"?$o(t,function(i,a){In(e,a,o,r)}):typeof e=="string"&&typeof t=="string"?In(e,t,o,r):se(o.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)))}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);s(n)}else return new Promise(function(o,i){s(function(a,c){if(a){i(a);return}o(c)})})}function Bo(e,t){for(var n=e.length^t.length,r=0;r<e.length;++r)n|=e.charCodeAt(r)^t.charCodeAt(r);return n===0}function zd(e,t){if(typeof e!="string"||typeof t!="string")throw Error("Illegal arguments: "+typeof e+", "+typeof t);return t.length!==60?!1:Bo(Uo(e,t.substring(0,t.length-31)),t)}function Hd(e,t,n,r){function s(o){if(typeof e!="string"||typeof t!="string"){se(o.bind(this,Error("Illegal arguments: "+typeof e+", "+typeof t)));return}if(t.length!==60){se(o.bind(this,null,!1));return}qo(e,t.substring(0,29),function(i,a){i?o(i):o(null,Bo(a,t))},r)}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);s(n)}else return new Promise(function(o,i){s(function(a,c){if(a){i(a);return}o(c)})})}function Kd(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);return parseInt(e.split("$")[2],10)}function Wd(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);if(e.length!==60)throw Error("Illegal hash length: "+e.length+" != 60");return e.substring(0,29)}function Qd(e){if(typeof e!="string")throw Error("Illegal arguments: "+typeof e);return Vo(e)>72}var se=typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"?scheduler.postTask.bind(scheduler):setTimeout;function Vo(e){for(var t=0,n=0,r=0;r<e.length;++r)n=e.charCodeAt(r),n<128?t+=1:n<2048?t+=2:(n&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320?(++r,t+=4):t+=3;return t}function Gd(e){for(var t=0,n,r,s=new Array(Vo(e)),o=0,i=e.length;o<i;++o)n=e.charCodeAt(o),n<128?s[t++]=n:n<2048?(s[t++]=n>>6|192,s[t++]=n&63|128):(n&64512)===55296&&((r=e.charCodeAt(o+1))&64512)===56320?(n=65536+((n&1023)<<10)+(r&1023),++o,s[t++]=n>>18|240,s[t++]=n>>12&63|128,s[t++]=n>>6&63|128,s[t++]=n&63|128):(s[t++]=n>>12|224,s[t++]=n>>6&63|128,s[t++]=n&63|128);return s}var Me="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),be=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function _t(e,t){var n=0,r=[],s,o;if(t<=0||t>e.length)throw Error("Illegal len: "+t);for(;n<t;){if(s=e[n++]&255,r.push(Me[s>>2&63]),s=(s&3)<<4,n>=t){r.push(Me[s&63]);break}if(o=e[n++]&255,s|=o>>4&15,r.push(Me[s&63]),s=(o&15)<<2,n>=t){r.push(Me[s&63]);break}o=e[n++]&255,s|=o>>6&3,r.push(Me[s&63]),r.push(Me[o&63])}return r.join("")}function zo(e,t){var n=0,r=e.length,s=0,o=[],i,a,c,l,d,u;if(t<=0)throw Error("Illegal len: "+t);for(;n<r-1&&s<t&&(u=e.charCodeAt(n++),i=u<be.length?be[u]:-1,u=e.charCodeAt(n++),a=u<be.length?be[u]:-1,!(i==-1||a==-1||(d=i<<2>>>0,d|=(a&48)>>4,o.push(String.fromCharCode(d)),++s>=t||n>=r)||(u=e.charCodeAt(n++),c=u<be.length?be[u]:-1,c==-1)||(d=(a&15)<<4>>>0,d|=(c&60)>>2,o.push(String.fromCharCode(d)),++s>=t||n>=r)));)u=e.charCodeAt(n++),l=u<be.length?be[u]:-1,d=(c&3)<<6>>>0,d|=l,o.push(String.fromCharCode(d)),++s;var f=[];for(n=0;n<s;n++)f.push(o[n].charCodeAt(0));return f}var st=16,nr=10,Yd=16,Xd=100,Wr=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Qr=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],Ho=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function ot(e,t,n,r){var s,o=e[t],i=e[t+1];return o^=n[0],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[1],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[2],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[3],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[4],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[5],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[6],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[7],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[8],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[9],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[10],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[11],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[12],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[13],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[14],s=r[o>>>24],s+=r[256|o>>16&255],s^=r[512|o>>8&255],s+=r[768|o&255],i^=s^n[15],s=r[i>>>24],s+=r[256|i>>16&255],s^=r[512|i>>8&255],s+=r[768|i&255],o^=s^n[16],e[t]=i^n[Yd+1],e[t+1]=o,e}function je(e,t){for(var n=0,r=0;n<4;++n)r=r<<8|e[t]&255,t=(t+1)%e.length;return{key:r,offp:t}}function Gr(e,t,n){for(var r=0,s=[0,0],o=t.length,i=n.length,a,c=0;c<o;c++)a=je(e,r),r=a.offp,t[c]=t[c]^a.key;for(c=0;c<o;c+=2)s=ot(s,0,t,n),t[c]=s[0],t[c+1]=s[1];for(c=0;c<i;c+=2)s=ot(s,0,t,n),n[c]=s[0],n[c+1]=s[1]}function Jd(e,t,n,r){for(var s=0,o=[0,0],i=n.length,a=r.length,c,l=0;l<i;l++)c=je(t,s),s=c.offp,n[l]=n[l]^c.key;for(s=0,l=0;l<i;l+=2)c=je(e,s),s=c.offp,o[0]^=c.key,c=je(e,s),s=c.offp,o[1]^=c.key,o=ot(o,0,n,r),n[l]=o[0],n[l+1]=o[1];for(l=0;l<a;l+=2)c=je(e,s),s=c.offp,o[0]^=c.key,c=je(e,s),s=c.offp,o[1]^=c.key,o=ot(o,0,n,r),r[l]=o[0],r[l+1]=o[1]}function Yr(e,t,n,r,s){var o=Ho.slice(),i=o.length,a;if(n<4||n>31)if(a=Error("Illegal number of rounds (4-31): "+n),r){se(r.bind(this,a));return}else throw a;if(t.length!==st)if(a=Error("Illegal salt length: "+t.length+" != "+st),r){se(r.bind(this,a));return}else throw a;n=1<<n>>>0;var c,l,d=0,u;typeof Int32Array=="function"?(c=new Int32Array(Wr),l=new Int32Array(Qr)):(c=Wr.slice(),l=Qr.slice()),Jd(t,e,c,l);function f(){if(s&&s(d/n),d<n)for(var m=Date.now();d<n&&(d=d+1,Gr(e,c,l),Gr(t,c,l),!(Date.now()-m>Xd)););else{for(d=0;d<64;d++)for(u=0;u<i>>1;u++)ot(o,u<<1,c,l);var h=[];for(d=0;d<i;d++)h.push((o[d]>>24&255)>>>0),h.push((o[d]>>16&255)>>>0),h.push((o[d]>>8&255)>>>0),h.push((o[d]&255)>>>0);if(r){r(null,h);return}else return h}r&&se(f)}if(typeof r<"u")f();else for(var x;;)if(typeof(x=f())<"u")return x||[]}function In(e,t,n,r){var s;if(typeof e!="string"||typeof t!="string")if(s=Error("Invalid string / salt: Not a string"),n){se(n.bind(this,s));return}else throw s;var o,i;if(t.charAt(0)!=="$"||t.charAt(1)!=="2")if(s=Error("Invalid salt version: "+t.substring(0,2)),n){se(n.bind(this,s));return}else throw s;if(t.charAt(2)==="$")o="\0",i=3;else{if(o=t.charAt(2),o!=="a"&&o!=="b"&&o!=="y"||t.charAt(3)!=="$")if(s=Error("Invalid salt revision: "+t.substring(2,4)),n){se(n.bind(this,s));return}else throw s;i=4}if(t.charAt(i+2)>"$")if(s=Error("Missing salt rounds"),n){se(n.bind(this,s));return}else throw s;var a=parseInt(t.substring(i,i+1),10)*10,c=parseInt(t.substring(i+1,i+2),10),l=a+c,d=t.substring(i+3,i+25);e+=o>="a"?"\0":"";var u=Gd(e),f=zo(d,st);function x(m){var h=[];return h.push("$2"),o>="a"&&h.push(o),h.push("$"),l<10&&h.push("0"),h.push(l.toString()),h.push("$"),h.push(_t(f,f.length)),h.push(_t(m,Ho.length*4-1)),h.join("")}if(typeof n>"u")return x(Yr(u,f,l));Yr(u,f,l,function(m,h){m?n(m,null):n(null,x(h))},r)}function Zd(e,t){return _t(e,t)}function eu(e,t){return zo(e,t)}const tu={setRandomFallback:Vd,genSaltSync:tr,genSalt:$o,hashSync:Uo,hash:qo,compareSync:zd,compare:Hd,getRounds:Kd,getSalt:Wd,truncates:Qd,encodeBase64:Zd,decodeBase64:eu};class nu{async getResidencies(){const t=J(j(S,"residencies"),pt("name"));return(await V(t)).docs.map(r=>({id:r.id,...r.data()}))}async registerResidency(t){const n=await fetch("/api/registerResidency",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const o=await n.text();let i;try{i=JSON.parse(o)}catch{throw console.error("Register Residency Error (Raw):",o),new Error("Failed to register residency (Server Error)")}throw new Error(i.message||"Failed to register residency")}const r=await n.text();let s;try{s=JSON.parse(r)}catch{throw console.error("Register Residency Success Parse Error:",r),new Error("Invalid server response")}return s.data}async login(t){const{username:n,password:r,residencyId:s}=t,o=F(S,"residencies",s),i=await K(o);if(!i.exists())throw new Error("Residency not found");const a=i.data(),c=a.name;if(n===a.adminUsername){if(a.adminPassword!==r)throw new Error("Invalid credentials");const x={id:"admin",username:a.adminUsername,role:"admin",name:"Admin",phone:a.adminPhone||null,active:!0,residencyId:s,residencyName:c};return this.saveSession(x),x}const l=F(S,"residencies",s,"residents",n),d=await K(l);if(d.exists()){const x=d.data();let m=x.password===r;if(!m)try{m=await tu.compare(r,x.password)}catch{m=!1}if(!m)throw new Error("Invalid credentials");if(x.active===!1)throw new Error("Account disabled");let h=null;if(x.flatId){const y=F(S,"residencies",s,"flats",x.flatId),w=await K(y);w.exists()&&(h=w.data().number)}const p={id:d.id,...x,residencyId:s,residencyName:c,role:"resident",flatNumber:h};return delete p.password,this.saveSession(p),p}const u=F(S,"residencies",s,"guards",n),f=await K(u);if(f.exists()){const x=f.data();if(x.password!==r)throw new Error("Invalid credentials");if(x.active===!1)throw new Error("Account disabled");const m={id:f.id,...x,residencyId:s,residencyName:c,role:"guard"};return delete m.password,this.saveSession(m),m}throw new Error("Invalid credentials or user not found")}saveSession(t){localStorage.setItem("society_user_session",JSON.stringify({username:t.username,residencyId:t.residencyId,residencyName:t.residencyName,role:t.role,flatNumber:t.flatNumber,loggedIn:!0})),t.residencyName&&localStorage.setItem("residencyName",t.residencyName),navigator.storage&&navigator.storage.persist&&navigator.storage.persist().then(n=>{console.log(n?"Storage will not be cleared except by explicit user action":"Storage may be cleared by the UA under storage pressure.")}).catch(n=>console.error("Persistence check failed",n))}async logout(){localStorage.removeItem("society_user_session"),localStorage.removeItem("residencyName");try{await qi(Lo)}catch(t){console.warn("Firebase signout error (harmless if already signed out):",t)}}async getCurrentUser(){const t=localStorage.getItem("society_user_session");if(!t)return null;try{const n=JSON.parse(t);if(!n.username||!n.residencyId)return null;const r=F(S,"residencies",n.residencyId);try{const s=await K(r);if(!s.exists())return await this.logout(),null;const o=s.data();if(n.role==="admin")return o.adminUsername!==n.username?(await this.logout(),null):{...n,name:"Admin",phone:o.adminPhone||null,active:!0};const i=n.role==="guard"?"guards":"residents",a=await K(F(S,"residencies",n.residencyId,i,n.username));if(!a.exists())return await this.logout(),null;const c=a.data();if(c.active===!1)return await this.logout(),null;let l=n.flatNumber;if(n.role==="resident"&&!l&&c.flatId){const d=F(S,"residencies",n.residencyId,"flats",c.flatId),u=await K(d);u.exists()&&(l=u.data().number)}return{...n,...c,id:a.id,flatNumber:l}}catch(s){return console.warn("Network error verifying session, trusting localStorage:",s),n}}catch(n){return console.error("Error parsing session:",n),null}}async getVisitorRequests(t){const n=await this.getCurrentUser();if(!n)return[];let r=J(j(S,"residencies",n.residencyId,"visitor_requests"),pt("createdAt","desc"));t?.status&&(r=J(r,Oe("status","==",t.status)));let o=(await V(r)).docs.map(d=>({id:d.id,...d.data()}));const i=await this.getBlocks(n.residencyId),c=(await V(j(S,"residencies",n.residencyId,"flats"))).docs.map(d=>({id:d.id,...d.data()})),l=o.map(d=>{const u=c.find(x=>x.id===d.flatId);if(!u)return null;const f=i.find(x=>x.id===u.blockId);return f?{...d,flat:{...u,block:f}}:null}).filter(Boolean);if(n.role==="resident"){const d=await K(F(S,"residencies",n.residencyId,"residents",n.username));if(d.exists()){const u=d.data();return l.filter(f=>{if(f.flatId&&u.flatId&&f.flatId===u.flatId)return!0;let x=f.flat?.block?.name?.toUpperCase();const m=f.flat?.number?.toUpperCase();let h=u.block?.toUpperCase();const p=u.flat?.toUpperCase();return x&&(x=x.replace(/^(BLOCK|TOWER|WING)\s+/,"").trim()),h&&(h=h.replace(/^(BLOCK|TOWER|WING)\s+/,"").trim()),x&&m&&h&&p?x===h&&m===p:!1})}}return l}async getAllVisitorRequestsWithDetails(){return this.getVisitorRequests()}async getStats(){const t=await this.getCurrentUser();if(!t)return{totalVisitors:0,pendingRequests:0,activeVisitors:0};const n=J(j(S,"residencies",t.residencyId,"visitor_requests")),s=(await V(n)).docs.map(o=>o.data());return{totalVisitors:s.length,pendingRequests:s.filter(o=>o.status==="pending").length,activeVisitors:s.filter(o=>o.status==="entered").length}}async createPublicVisitorRequest(t,n,r){if(!n)throw new Error("Residency ID is required");const s={...t,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return(await Wt(j(S,"residencies",n,"visitor_requests"),s)).id}async createVisitorRequest(t){const n=await this.getCurrentUser();if(!n)throw new Error("Not authenticated");return this.createPublicVisitorRequest(t,n.residencyId)}async updateVisitorRequestStatus(t,n){const r=await this.getCurrentUser();if(!r)throw new Error("Not authenticated");if(!(await fetch("/api/update-request-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({residencyId:r.residencyId,requestId:t,status:n,username:r.username})})).ok)throw new Error("Failed to update status");return t}subscribeToVisitorRequest(t,n,r){let s=null;return(async()=>{let i=r;if(!i){const c=await this.getCurrentUser();c&&(i=c.residencyId)}if(!i){console.error("No residency ID provided for visitor subscription"),n(null);return}const a=F(S,"residencies",i,"visitor_requests",t);s=xt(a,async c=>{if(!c.exists()){n(null);return}const l={id:c.id,...c.data()},u=(await V(j(S,"residencies",i,"flats"))).docs.map(h=>({id:h.id,...h.data()})),f=await this.getBlocks(i),x=u.find(h=>h.id===l.flatId);let m=null;if(x){const h=f.find(p=>p.id===x.blockId);h&&(m={...l,flat:{...x,block:h}})}n(m||l)})})(),()=>{s&&s()}}subscribeToVisitorRequests(t,n){let r=null,s=!0;const o="[LiveListener]";return console.log(`${o} Initializing subscription...`),this.getCurrentUser().then(async i=>{if(!s){console.log(`${o} Subscribed cancelled before user load.`);return}if(!i){console.warn(`${o} No user found, returning empty.`),t([]);return}console.log(`${o} User identified:`,i.username,i.role);let a=null;if(i.role==="resident")try{const l=await K(F(S,"residencies",i.residencyId,"residents",i.username));l.exists()?(a=l.data(),console.log(`${o} Resident profile loaded:`,a.block,a.flat)):console.error(`${o} Resident profile NOT found in Firestore!`)}catch(l){console.error(`${o} Error fetching resident profile:`,l)}if(!s)return;let c=J(j(S,"residencies",i.residencyId,"visitor_requests"),pt("createdAt","desc"));n?.status&&(c=J(c,Oe("status","==",n.status))),console.log(`${o} Connecting to Firestore...`),r=xt(c,async l=>{if(!s)return;console.log(`${o} Snapshot received! Docs: ${l.docs.length}`);let d=l.docs.map(p=>({id:p.id,...p.data()}));const u=await this.getBlocks(i.residencyId),x=(await V(j(S,"residencies",i.residencyId,"flats"))).docs.map(p=>({id:p.id,...p.data()}));if(!s)return;const m=d.map(p=>{const y=x.find(v=>v.id===p.flatId);if(!y)return null;const w=u.find(v=>v.id===y.blockId);return w?{...p,flat:{...y,block:w}}:null}).filter(Boolean);let h=m;i.role==="resident"&&a&&(h=m.filter(p=>{if(p.flatId&&a.flatId&&p.flatId===a.flatId)return!0;let y=p.flat?.block?.name?.toUpperCase();const w=p.flat?.number?.toUpperCase();let v=a.block?.toUpperCase();const E=a.flat?.toUpperCase();return y&&(y=y.replace(/^(BLOCK|TOWER|WING)\s+/,"").trim()),v&&(v=v.replace(/^(BLOCK|TOWER|WING)\s+/,"").trim()),y&&w&&v&&E?y===v&&w===E:!1})),console.log(`${o} Filtered requests for user: ${h.length}`),t(h)},l=>{console.error(`${o} Firestore Listener Error:`,l)})}),()=>{console.log(`${o} Unsubscribing...`),s=!1,r&&r()}}subscribeToUsers(t){let n=!0,r,s;return this.getCurrentUser().then(async o=>{if(!n)return;if(!o||o.role!=="admin"){t([]);return}const i=J(j(S,"residencies",o.residencyId,"residents")),a=J(j(S,"residencies",o.residencyId,"guards"));let c=[],l=[];const d=await K(F(S,"residencies",o.residencyId));let u=null;if(d.exists()){const x=d.data();u={id:"admin",username:x.adminUsername,role:"admin",name:"Admin",phone:x.adminPhone,active:!0,residencyId:o.residencyId}}const f=async()=>{if(!n)return;const x=[...c,...l];u&&x.unshift(u);const m=await this.getBlocks(),p=(await V(j(S,"residencies",o.residencyId,"flats"))).docs.map(w=>({id:w.id,...w.data()})),y=x.map(w=>{let v;if(w.role==="resident"){if(w.flatId){const E=p.find(C=>C.id===w.flatId);if(E){const C=m.find(T=>T.id===E.blockId);C&&(v={...E,block:C})}}!v&&w.block&&w.flat&&(v={number:w.flat,block:{name:De(w.block)||w.block}})}return{...w,flat:v}});t(y)};r=xt(i,x=>{c=x.docs.map(m=>({id:m.id,...m.data(),role:"resident"})),f()}),s=xt(a,x=>{l=x.docs.map(m=>({id:m.id,...m.data(),role:"guard"})),f()})}),()=>{n=!1,r&&r(),s&&s()}}async getResidencyByName(t){const n=J(j(S,"residencies"),Oe("name","==",t)),r=await V(n);if(r.empty)return null;const s=r.docs[0];return{id:s.id,...s.data()}}async getBlocks(t){let n=t;if(!n){const o=await this.getCurrentUser();if(!o)return[];n=o.residencyId}const r=J(j(S,"residencies",n,"blocks"),pt("name"));return(await V(r)).docs.map(o=>({id:o.id,...o.data()}))}async getFlatsByBlock(t,n){let r=n;if(!r){const a=await this.getCurrentUser();if(!a)return[];r=a.residencyId}const s=J(j(S,"residencies",r,"flats"),Oe("blockId","==",t));return(await V(s)).docs.map(a=>({id:a.id,...a.data()})).sort((a,c)=>a.number.localeCompare(c.number))}async createBlock(t){const n=await this.getCurrentUser();if(!n)throw new Error("Not authenticated");return{id:(await Wt(j(S,"residencies",n.residencyId,"blocks"),{name:t})).id,name:t}}async createBlocks(t){const n=await this.getCurrentUser();if(!n)throw new Error("Not authenticated");const r=parseInt(t,10);if(isNaN(r)||r<1)throw new Error("Invalid block count");const s=await this.getBlocks(n.residencyId),o=new Set(s.map(u=>u.name));let i=-1;for(const u of o)if(u.startsWith("Block ")){const f=u.replace("Block ","");if(f.length===1){const x=f.charCodeAt(0)-65;x>=0&&x<26&&x>i&&(i=x)}}const a=[];let c=i+1;for(let u=0;u<r&&!(c>=26);u++){const f=`Block ${String.fromCharCode(65+c)}`;o.has(f)?u--:a.push(f),c++}if(a.length===0)return[];const l=Ne(S),d=[];for(const u of a){const f=F(j(S,"residencies",n.residencyId,"blocks"));l.set(f,{name:u}),d.push({id:f.id,name:u})}return await l.commit(),d}async createFlatsBulk(t,n,r){const s=await this.getCurrentUser();if(!s)throw new Error("Not authenticated");const o=parseInt(n,10),i=parseInt(r,10);if(isNaN(o)||o<1)throw new Error("Invalid floors count");if(isNaN(i)||i<1)throw new Error("Invalid flats per floor count");let a=[];if(t==="all"?a=await this.getBlocks(s.residencyId):a=[{id:t}],a.length===0)return[];let c=Ne(S),l=0;const d=450,u=await V(j(S,"residencies",s.residencyId,"flats")),f=new Set(u.docs.map(x=>`${x.data().blockId}-${x.data().number}`));for(const x of a)for(let m=1;m<=o;m++)for(let h=1;h<=i;h++){const p=`${m}${h.toString().padStart(2,"0")}`,y=`${x.id}-${p}`;if(f.has(y))continue;const w=F(j(S,"residencies",s.residencyId,"flats"));c.set(w,{number:p,blockId:x.id,floor:m}),l++,l%d===0&&(await c.commit(),c=Ne(S))}return l%d!==0&&await c.commit(),{count:l}}async createFlat(t,n,r){const s=await this.getCurrentUser();if(!s)throw new Error("Not authenticated");return{id:(await Wt(j(S,"residencies",s.residencyId,"flats"),{number:t,blockId:n,floor:r})).id,number:t,blockId:n,floor:r}}async updateUser(t,n,r){const s=await this.getCurrentUser();if(!s||s.role!=="admin")throw new Error("Unauthorized");const o=s.residencyId;if(n==="admin"){const c={updatedAt:Fe()};r.username&&(c.adminUsername=r.username),r.password&&(c.adminPassword=r.password),r.phone&&(c.adminPhone=r.phone),await _e(F(S,"residencies",o),c);return}const i=n==="guard"?"guards":"residents",a=F(S,"residencies",o,i,t);if(r.username&&r.username!==t){const c=F(S,"residencies",o,i,r.username);if((await K(c)).exists())throw new Error("Username already taken");const d=await K(a);if(!d.exists())throw new Error("User not found");const f={...d.data(),username:r.username,updatedAt:Fe()};if(r.password&&(f.password=r.password),r.phone!==void 0&&(f.phone=r.phone),n==="resident"){r.flatId&&(f.flatId=r.flatId);const m=r.block?De(r.block):null;if(r.block&&!m)throw new Error("Invalid block value");m&&(f.block=m),r.flat&&(f.flat=String(r.flat))}const x=Ne(S);x.set(c,f),x.delete(a),await x.commit()}else{const c={updatedAt:Fe()};if(r.password&&(c.password=r.password),r.phone!==void 0&&(c.phone=r.phone),n==="resident"){r.flatId&&(c.flatId=r.flatId);const l=r.block?De(r.block):null;if(r.block&&!l)throw new Error("Invalid block value");l&&(c.block=l),r.flat&&(c.flat=String(r.flat))}await _e(a,c)}}async deleteUser(t,n){const r=await this.getCurrentUser();if(!r||r.role!=="admin")throw new Error("Unauthorized");if(n==="admin")throw new Error("Cannot delete admin account");const s=n==="guard"?"guards":"residents";await Bi(F(S,"residencies",r.residencyId,s,t))}async getAllUsersWithDetails(){const t=await this.getCurrentUser();if(!t||t.role!=="admin")return[];const r=(await V(j(S,"residencies",t.residencyId,"residents"))).docs.map(f=>({id:f.id,...f.data(),role:"resident"})),o=(await V(j(S,"residencies",t.residencyId,"guards"))).docs.map(f=>({id:f.id,...f.data(),role:"guard"})),i=await K(F(S,"residencies",t.residencyId));let a=null;if(i.exists()){const f=i.data();a={id:"admin",username:f.adminUsername,role:"admin",name:"Admin",phone:f.adminPhone,active:!0,residencyId:t.residencyId}}const c=[...r,...o];a&&c.unshift(a);const l=await this.getBlocks(),u=(await V(j(S,"residencies",t.residencyId,"flats"))).docs.map(f=>({id:f.id,...f.data()}));return c.map(f=>{let x;if(f.role==="resident"){if(f.flatId){const m=u.find(h=>h.id===f.flatId);if(m){const h=l.find(p=>p.id===m.blockId);h&&(x={...m,block:h})}}!x&&f.block&&f.flat&&(x={number:f.flat,block:{name:De(f.block)||f.block}})}return{...f,flat:x}})}async createResident(t){const n=await this.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized");if(t.username===n.username)throw new Error("Cannot create user with same username as admin");const r=j(S,"residencies",n.residencyId,"residents"),s=J(r,Oe("username","==",t.username));if(!(await V(s)).empty)throw new Error("Username already taken");let i=null,a=null;if(t.flatId){const c=await K(F(S,"residencies",n.residencyId,"flats",t.flatId));if(c.exists()){const l=c.data();if(a=String(l.number),l.blockId){const d=await K(F(S,"residencies",n.residencyId,"blocks",l.blockId));if(d.exists()){const u=d.data().name;i=De(u)||u}}}}return await un(F(r,t.username),{username:t.username,password:t.password,phone:t.phone||null,flatId:t.flatId,block:i||null,flat:a||null,active:!0,createdAt:new Date().toISOString()}),{username:t.username}}async createResidentsBulk(t){const n=await this.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized");const s=(await V(j(S,"residencies",n.residencyId,"blocks"))).docs.map(p=>({id:p.id,...p.data()})),i=(await V(j(S,"residencies",n.residencyId,"flats"))).docs.map(p=>({id:p.id,...p.data()})),a=await V(j(S,"residencies",n.residencyId,"residents")),c=new Set(a.docs.map(p=>p.data().username)),l=new Set(a.docs.map(p=>p.data().flatId));let d=Ne(S),u=0,f=0,x=0;const m=[],h=450;for(const p of t)try{const y=p.blockName.trim(),w=s.find(O=>O.name.toLowerCase()===y.toLowerCase())||s.find(O=>O.name.toLowerCase()===`block ${y.toLowerCase()}`)||s.find(O=>O.name.toLowerCase().endsWith(` ${y.toLowerCase()}`));if(!w){f++,m.push({...p,status:"skipped",reason:`Block '${p.blockName}' not found`});continue}const v=i.find(O=>O.blockId===w.id&&O.number===p.flatNumber.toString());if(!v){f++,m.push({...p,status:"skipped",reason:`Flat '${p.flatNumber}' not found in ${w.name}`});continue}if(l.has(v.id)){f++,m.push({...p,status:"skipped",reason:`Flat '${p.flatNumber}' is already occupied`});continue}const C=p.name.trim().split(" ")[0].toLowerCase().replace(/[^a-z0-9]/g,"");if(!C){f++,m.push({...p,status:"skipped",reason:"Invalid name format"});continue}if(c.has(C)){f++,m.push({...p,status:"skipped",reason:`Username '${C}' already exists`});continue}const T=p.name.trim().toLowerCase().replace(/[^a-z]/g,"").substring(0,4);let I="00";if(p.phone){const O=p.phone.replace(/[^0-9]/g,"");O.length>=2&&(I=O.substring(O.length-2))}const N=`${T}${I}`,_=F(j(S,"residencies",n.residencyId,"residents"),C),D=De(w.name)||w.name;d.set(_,{username:C,password:N,phone:p.phone||null,flatId:v.id,block:D,flat:String(v.number),active:!0,createdAt:new Date().toISOString()}),c.add(C),l.add(v.id),u++,u%h===0&&(await d.commit(),d=Ne(S))}catch(y){console.error("Error processing entry:",p,y),f++,m.push({...p,status:"failed",reason:y.message})}return u%h!==0&&await d.commit(),{created:u,skipped:f,failed:x,details:m}}async createSystemUser(t){const n=await this.getCurrentUser();if(!n||n.role!=="admin")throw new Error("Unauthorized");const r=t.role==="guard"?"guards":"residents",s=j(S,"residencies",n.residencyId,r),o=J(s,Oe("username","==",t.username));if(!(await V(o)).empty)throw new Error("Username already taken");return await un(F(s,t.username),{username:t.username,password:t.password,phone:t.phone||null,active:!0,createdAt:new Date().toISOString()}),{username:t.username}}async saveUserToken(t){const n=await this.getCurrentUser();if(n)try{if(n.role==="admin"){const r=F(S,"residencies",n.residencyId);await _e(r,{adminFcmToken:t,updatedAt:Fe()})}else{const r=n.role==="guard"?"guards":"residents",s=F(S,"residencies",n.residencyId,r,n.username);await _e(s,{fcmToken:t,updatedAt:Fe()})}console.log("FCM Token saved for user:",n.username)}catch(r){console.error("Error saving token:",r)}}async removeUserToken(){const t=await this.getCurrentUser();if(t)try{if(t.role==="admin"){const n=F(S,"residencies",t.residencyId);await _e(n,{adminFcmToken:null})}else{const n=t.role==="guard"?"guards":"residents",r=F(S,"residencies",t.residencyId,n,t.username);await _e(r,{fcmToken:null})}}catch(n){console.error("Error removing token:",n)}}}const sn=new nu,Ko="@firebase/installations",rr="0.6.19";const Wo=1e4,Qo=`w:${rr}`,Go="FIS_v2",ru="https://firebaseinstallations.googleapis.com/v1",su=3600*1e3,ou="installations",iu="Installations";const au={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ie=new ds(ou,iu,au);function Yo(e){return e instanceof Vi&&e.code.includes("request-failed")}function Xo({projectId:e}){return`${ru}/projects/${e}/installations`}function Jo(e){return{token:e.token,requestStatus:2,expiresIn:lu(e.expiresIn),creationTime:Date.now()}}async function Zo(e,t){const r=(await t.json()).error;return Ie.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ei({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function cu(e,{refreshToken:t}){const n=ei(e);return n.append("Authorization",du(t)),n}async function ti(e){const t=await e();return t.status>=500&&t.status<600?e():t}function lu(e){return Number(e.replace("s","000"))}function du(e){return`${Go} ${e}`}async function uu({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Xo(e),s=ei(e),o=t.getImmediate({optional:!0});if(o){const l=await o.getHeartbeatsHeader();l&&s.append("x-firebase-client",l)}const i={fid:n,authVersion:Go,appId:e.appId,sdkVersion:Qo},a={method:"POST",headers:s,body:JSON.stringify(i)},c=await ti(()=>fetch(r,a));if(c.ok){const l=await c.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:Jo(l.authToken)}}else throw await Zo("Create Installation",c)}function ni(e){return new Promise(t=>{setTimeout(t,e)})}function fu(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}const hu=/^[cdef][\w-]{21}$/,An="";function pu(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=xu(e);return hu.test(n)?n:An}catch{return An}}function xu(e){return fu(e).substr(0,22)}function Ht(e){return`${e.appName}!${e.appId}`}const ri=new Map;function si(e,t){const n=Ht(e);oi(n,t),mu(n,t)}function oi(e,t){const n=ri.get(e);if(n)for(const r of n)r(t)}function mu(e,t){const n=bu();n&&n.postMessage({key:e,fid:t}),gu()}let Te=null;function bu(){return!Te&&"BroadcastChannel"in self&&(Te=new BroadcastChannel("[Firebase] FID Change"),Te.onmessage=e=>{oi(e.data.key,e.data.fid)}),Te}function gu(){ri.size===0&&Te&&(Te.close(),Te=null)}const yu="firebase-installations-database",wu=1,Ae="firebase-installations-store";let on=null;function sr(){return on||(on=On(yu,wu,{upgrade:(e,t)=>{t===0&&e.createObjectStore(Ae)}})),on}async function Dt(e,t){const n=Ht(e),s=(await sr()).transaction(Ae,"readwrite"),o=s.objectStore(Ae),i=await o.get(n);return await o.put(t,n),await s.done,(!i||i.fid!==t.fid)&&si(e,t.fid),t}async function ii(e){const t=Ht(e),r=(await sr()).transaction(Ae,"readwrite");await r.objectStore(Ae).delete(t),await r.done}async function Kt(e,t){const n=Ht(e),s=(await sr()).transaction(Ae,"readwrite"),o=s.objectStore(Ae),i=await o.get(n),a=t(i);return a===void 0?await o.delete(n):await o.put(a,n),await s.done,a&&(!i||i.fid!==a.fid)&&si(e,a.fid),a}async function or(e){let t;const n=await Kt(e.appConfig,r=>{const s=vu(r),o=Eu(e,s);return t=o.registrationPromise,o.installationEntry});return n.fid===An?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function vu(e){const t=e||{fid:pu(),registrationStatus:0};return ai(t)}function Eu(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ie.create("app-offline"));return{installationEntry:t,registrationPromise:s}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=Cu(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Tu(e)}:{installationEntry:t}}async function Cu(e,t){try{const n=await uu(e,t);return Dt(e.appConfig,n)}catch(n){throw Yo(n)&&n.customData.serverCode===409?await ii(e.appConfig):await Dt(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function Tu(e){let t=await Xr(e.appConfig);for(;t.registrationStatus===1;)await ni(100),t=await Xr(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await or(e);return r||n}return t}function Xr(e){return Kt(e,t=>{if(!t)throw Ie.create("installation-not-found");return ai(t)})}function ai(e){return Ru(e)?{fid:e.fid,registrationStatus:0}:e}function Ru(e){return e.registrationStatus===1&&e.registrationTime+Wo<Date.now()}async function Su({appConfig:e,heartbeatServiceProvider:t},n){const r=Iu(e,n),s=cu(e,n),o=t.getImmediate({optional:!0});if(o){const l=await o.getHeartbeatsHeader();l&&s.append("x-firebase-client",l)}const i={installation:{sdkVersion:Qo,appId:e.appId}},a={method:"POST",headers:s,body:JSON.stringify(i)},c=await ti(()=>fetch(r,a));if(c.ok){const l=await c.json();return Jo(l)}else throw await Zo("Generate Auth Token",c)}function Iu(e,{fid:t}){return`${Xo(e)}/${t}/authTokens:generate`}async function ir(e,t=!1){let n;const r=await Kt(e.appConfig,o=>{if(!ci(o))throw Ie.create("not-registered");const i=o.authToken;if(!t&&ku(i))return o;if(i.requestStatus===1)return n=Au(e,t),o;{if(!navigator.onLine)throw Ie.create("app-offline");const a=Nu(o);return n=Pu(e,a),a}});return n?await n:r.authToken}async function Au(e,t){let n=await Jr(e.appConfig);for(;n.authToken.requestStatus===1;)await ni(100),n=await Jr(e.appConfig);const r=n.authToken;return r.requestStatus===0?ir(e,t):r}function Jr(e){return Kt(e,t=>{if(!ci(t))throw Ie.create("not-registered");const n=t.authToken;return _u(n)?{...t,authToken:{requestStatus:0}}:t})}async function Pu(e,t){try{const n=await Su(e,t),r={...t,authToken:n};return await Dt(e.appConfig,r),n}catch(n){if(Yo(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ii(e.appConfig);else{const r={...t,authToken:{requestStatus:0}};await Dt(e.appConfig,r)}throw n}}function ci(e){return e!==void 0&&e.registrationStatus===2}function ku(e){return e.requestStatus===2&&!Ou(e)}function Ou(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+su}function Nu(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function _u(e){return e.requestStatus===1&&e.requestTime+Wo<Date.now()}async function Du(e){const t=e,{installationEntry:n,registrationPromise:r}=await or(t);return r?r.catch(console.error):ir(t).catch(console.error),n.fid}async function Mu(e,t=!1){const n=e;return await Fu(n),(await ir(n,t)).token}async function Fu(e){const{registrationPromise:t}=await or(e);t&&await t}function ju(e){if(!e||!e.options)throw an("App Configuration");if(!e.name)throw an("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw an(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function an(e){return Ie.create("missing-app-config-values",{valueName:e})}const li="installations",Lu="installations-internal",$u=e=>{const t=e.getProvider("app").getImmediate(),n=ju(t),r=kn(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Uu=e=>{const t=e.getProvider("app").getImmediate(),n=kn(t,li).getImmediate();return{getId:()=>Du(n),getToken:s=>Mu(n,s)}};function qu(){St(new It(li,$u,"PUBLIC")),St(new It(Lu,Uu,"PRIVATE"))}qu();Rt(Ko,rr);Rt(Ko,rr,"esm2020");const Bu="/firebase-messaging-sw.js",Vu="/firebase-cloud-messaging-push-scope",di="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zu="https://fcmregistrations.googleapis.com/v1",ui="google.c.a.c_id",Hu="google.c.a.c_l",Ku="google.c.a.ts",Wu="google.c.a.e",Zr=1e4;var es;(function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(es||(es={}));var it;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(it||(it={}));function fe(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qu(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let o=0;o<r.length;++o)s[o]=r.charCodeAt(o);return s}const cn="fcm_token_details_db",Gu=5,ts="fcm_token_object_Store";async function Yu(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(cn))return null;let t=null;return(await On(cn,Gu,{upgrade:async(r,s,o,i)=>{if(s<2||!r.objectStoreNames.contains(ts))return;const a=i.objectStore(ts),c=await a.index("fcmSenderId").get(e);if(await a.clear(),!!c){if(s===2){const l=c;if(!l.auth||!l.p256dh||!l.endpoint)return;t={token:l.fcmToken,createTime:l.createTime??Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:fe(l.vapidKey)}}}else if(s===3){const l=c;t={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:fe(l.auth),p256dh:fe(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:fe(l.vapidKey)}}}else if(s===4){const l=c;t={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:fe(l.auth),p256dh:fe(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:fe(l.vapidKey)}}}}}})).close(),await Qt(cn),await Qt("fcm_vapid_details_db"),await Qt("undefined"),Xu(t)?t:null}function Xu(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}const Ju="firebase-messaging-database",Zu=1,at="firebase-messaging-store";let ln=null;function fi(){return ln||(ln=On(Ju,Zu,{upgrade:(e,t)=>{t===0&&e.createObjectStore(at)}})),ln}async function ef(e){const t=hi(e),r=await(await fi()).transaction(at).objectStore(at).get(t);if(r)return r;{const s=await Yu(e.appConfig.senderId);if(s)return await ar(e,s),s}}async function ar(e,t){const n=hi(e),s=(await fi()).transaction(at,"readwrite");return await s.objectStore(at).put(t,n),await s.done,t}function hi({appConfig:e}){return e.appId}const tf={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},G=new ds("messaging","Messaging",tf);async function nf(e,t){const n=await lr(e),r=pi(t),s={method:"POST",headers:n,body:JSON.stringify(r)};let o;try{o=await(await fetch(cr(e.appConfig),s)).json()}catch(i){throw G.create("token-subscribe-failed",{errorInfo:i?.toString()})}if(o.error){const i=o.error.message;throw G.create("token-subscribe-failed",{errorInfo:i})}if(!o.token)throw G.create("token-subscribe-no-token");return o.token}async function rf(e,t){const n=await lr(e),r=pi(t.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${cr(e.appConfig)}/${t.token}`,s)).json()}catch(i){throw G.create("token-update-failed",{errorInfo:i?.toString()})}if(o.error){const i=o.error.message;throw G.create("token-update-failed",{errorInfo:i})}if(!o.token)throw G.create("token-update-no-token");return o.token}async function sf(e,t){const r={method:"DELETE",headers:await lr(e)};try{const o=await(await fetch(`${cr(e.appConfig)}/${t}`,r)).json();if(o.error){const i=o.error.message;throw G.create("token-unsubscribe-failed",{errorInfo:i})}}catch(s){throw G.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}}function cr({projectId:e}){return`${zu}/projects/${e}/registrations`}async function lr({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function pi({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:t,p256dh:e}};return r!==di&&(s.web.applicationPubKey=r),s}const of=10080*60*1e3;async function af(e){const t=await lf(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:fe(t.getKey("auth")),p256dh:fe(t.getKey("p256dh"))},r=await ef(e.firebaseDependencies);if(r){if(df(r.subscriptionOptions,n))return Date.now()>=r.createTime+of?cf(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await sf(e.firebaseDependencies,r.token)}catch(s){console.warn(s)}return ns(e.firebaseDependencies,n)}else return ns(e.firebaseDependencies,n)}async function cf(e,t){try{const n=await rf(e.firebaseDependencies,t),r={...t,token:n,createTime:Date.now()};return await ar(e.firebaseDependencies,r),n}catch(n){throw n}}async function ns(e,t){const r={token:await nf(e,t),createTime:Date.now(),subscriptionOptions:t};return await ar(e,r),r.token}async function lf(e,t){const n=await e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qu(t)})}function df(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,s=t.auth===e.auth,o=t.p256dh===e.p256dh;return n&&r&&s&&o}function rs(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return uf(t,e),ff(t,e),hf(t,e),t}function uf(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const s=t.notification.image;s&&(e.notification.image=s);const o=t.notification.icon;o&&(e.notification.icon=o)}function ff(e,t){t.data&&(e.data=t.data)}function hf(e,t){if(!t.fcmOptions&&!t.notification?.click_action)return;e.fcmOptions={};const n=t.fcmOptions?.link??t.notification?.click_action;n&&(e.fcmOptions.link=n);const r=t.fcmOptions?.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}function pf(e){return typeof e=="object"&&!!e&&ui in e}function xf(e){if(!e||!e.options)throw dn("App Configuration Object");if(!e.name)throw dn("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw dn(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function dn(e){return G.create("missing-app-config-values",{valueName:e})}class mf{constructor(t,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=xf(t);this.firebaseDependencies={app:t,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}async function bf(e){try{e.swRegistration=await navigator.serviceWorker.register(Bu,{scope:Vu}),e.swRegistration.update().catch(()=>{}),await gf(e.swRegistration)}catch(t){throw G.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}}async function gf(e){return new Promise((t,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${Zr} ms`)),Zr),s=e.installing||e.waiting;e.active?(clearTimeout(r),t()):s?s.onstatechange=o=>{o.target?.state==="activated"&&(s.onstatechange=null,clearTimeout(r),t())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}async function yf(e,t){if(!t&&!e.swRegistration&&await bf(e),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw G.create("invalid-sw-registration");e.swRegistration=t}}async function wf(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=di)}async function xi(e,t){if(!navigator)throw G.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw G.create("permission-blocked");return await wf(e,t?.vapidKey),await yf(e,t?.serviceWorkerRegistration),af(e)}async function vf(e,t,n){const r=Ef(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[ui],message_name:n[Hu],message_time:n[Ku],message_device_time:Math.floor(Date.now()/1e3)})}function Ef(e){switch(e){case it.NOTIFICATION_CLICKED:return"notification_open";case it.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function Cf(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===it.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(rs(n)):e.onMessageHandler.next(rs(n)));const r=n.data;pf(r)&&r[Wu]==="1"&&await vf(e,n.messageType,r)}const ss="@firebase/messaging",os="0.12.23";const Tf=e=>{const t=new mf(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>Cf(t,n)),t},Rf=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:r=>xi(t,r)}};function Sf(){St(new It("messaging",Tf,"PUBLIC")),St(new It("messaging-internal",Rf,"PRIVATE")),Rt(ss,os),Rt(ss,os,"esm2020")}async function If(){try{await Hi()}catch{return!1}return typeof window<"u"&&Ki()&&Wi()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Af(e,t){if(!navigator)throw G.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}function Pf(e=zi()){return If().then(t=>{if(!t)throw G.create("unsupported-browser")},t=>{throw G.create("indexed-db-unsupported")}),kn(Nn(e),"messaging").getImmediate()}async function kf(e,t){return e=Nn(e),xi(e,t)}function Of(e,t){return e=Nn(e),Af(e,t)}Sf();let Je=null;const mi=async()=>{if(typeof window<"u"&&"serviceWorker"in navigator)try{Je=Pf(er),Of(Je,e=>{console.log("Foreground Message received: ",e);const{title:t,body:n,icon:r}=e.notification||{};if(Notification.permission==="granted"){const s={body:n,icon:r||"/icons/icon-192.png",tag:e.messageId};navigator.serviceWorker.controller?navigator.serviceWorker.ready.then(o=>{o.showNotification(t,s)}):new Notification(t,s)}})}catch(e){console.error("Messaging initialization failed",e)}},Pn=async()=>{if(Je||await mi(),!!Je)try{if(await Notification.requestPermission()==="granted"){const t=await navigator.serviceWorker.ready,n=await kf(Je,{vapidKey:"BLFiCFEPQuz6DOXXMBv_0JbuSxPH7F_mqEusaS3ccJSZtvQADZ-dqYuUslZ9U8R-8upHCg8GHjo1aHNK2pmlUDc",serviceWorkerRegistration:t});n&&(console.log("FCM Token:",n),await Nf(n))}}catch(e){console.error("Error retrieving token:",e)}},Nf=async e=>{try{const t=localStorage.getItem("society_user_session");if(!t)return;const n=JSON.parse(t);if(!n.loggedIn)return;const{residencyId:r,username:s,role:o}=n;if(!r||!s)return;let i=null,a="fcmToken",c="fcmUpdatedAt";if(o==="admin"?(i=F(S,"residencies",r),a="adminFcmToken",c="adminFcmUpdatedAt"):o==="resident"?i=F(S,"residencies",r,"residents",s):o==="guard"&&(i=F(S,"residencies",r,"guards",s)),i){const l=await K(i);if(l.exists()&&l.data()[a]===e){console.log("Token already exists in Firestore, skipping write.");return}await un(i,{[a]:e,[c]:Fe()},{merge:!0}),console.log("Token saved to Firestore")}}catch(t){console.error("Error saving token to Firestore:",t)}},bi=b.createContext(null);function _f({children:e}){const[t,n]=b.useState(null),[r,s]=b.useState(null),[o,i]=b.useState(!0),[a,c]=b.useState(!1),l=Ps();b.useEffect(()=>{let f=!0;return(async()=>{try{const m=localStorage.getItem("society_user_session");let h=null;if(m)try{const p=JSON.parse(m);p&&p.loggedIn&&(h=await sn.getCurrentUser())}catch{h=null}f&&(n(h),s(h?.role??null),l.setQueryData(["/api/user"],h),h&&Pn().catch(console.error))}catch{f&&n(null),f&&s(null)}finally{f&&i(!1)}})(),()=>{f=!1}},[]);const d=async(f,x={})=>{c(!0);try{const m=await sn.login(f);n(m),s(m?.role??null),l.setQueryData(["/api/user"],m),Pn().catch(console.error),x.onSuccess?.(m)}catch(m){throw x.onError?.(m),m}finally{c(!1)}},u=async()=>{await sn.logout(),n(null),s(null),l.setQueryData(["/api/user"],null)};return g.jsx(bi.Provider,{value:{user:t,role:r,loading:o,isLoggingIn:a,login:d,logout:u},children:e})}function dr(){const e=b.useContext(bi);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}const Df=b.lazy(()=>ne(()=>import("./not-found-C7hJqVuk.js"),__vite__mapDeps([0,1,2,3,4]))),is=b.lazy(()=>ne(()=>import("./VisitorForm-CxBwF6tx.js"),__vite__mapDeps([5,1,2,6,7,8,9,10,11,12,13,14,15,3,16,4]))),Mf=b.lazy(()=>ne(()=>import("./VisitorStatus-LhQBSClJ.js"),__vite__mapDeps([17,1,2,11,3,16,4]))),Ff=b.lazy(()=>ne(()=>import("./Login-CJAUrKbH.js"),__vite__mapDeps([18,1,2,6,7,11,12,3,13,14,15,8,16,4]))),jf=b.lazy(()=>ne(()=>import("./RegisterResidency-CRTBlL4O.js"),__vite__mapDeps([19,1,2,6,7,10,11,12,3,8,16,4]))),as=b.lazy(()=>ne(()=>import("./ResidentDashboard-zF8P6zkV.js"),__vite__mapDeps([20,1,2,21,11,14,9,10,8,22,3,23,24,16,4]))),Lf=b.lazy(()=>ne(()=>import("./GuardDashboard-_yDdruN5.js"),__vite__mapDeps([25,1,2,21,11,14,9,10,8,22,3,23,12,4]))),$f=b.lazy(()=>ne(()=>import("./AdminDashboard-BuX1942w.js"),__vite__mapDeps([26,1,2,21,11,14,3,27,23,4]))),Uf=b.lazy(()=>ne(()=>import("./AdminManagement-DDKTrvCh.js").then(e=>e.A),__vite__mapDeps([28,1,2,21,11,14,10,3,12,7,29,13,15,24]))),qf=b.lazy(()=>ne(()=>import("./OwnerLogin-Dgr47wVd.js"),__vite__mapDeps([30,1,2,11,12,3,4]))),Bf=b.lazy(()=>ne(()=>import("./OwnerDashboard-CYhqIZyF.js"),__vite__mapDeps([31,1,2,11,12,3,27,15,7,29,4]))),Vf=b.lazy(()=>ne(()=>import("./Maintenance-wChMdD-U.js"),__vite__mapDeps([32,1,2,11,4])));function ct(){return g.jsx("div",{className:"flex items-center justify-center min-h-screen",children:g.jsx(_i,{className:"h-8 w-8 animate-spin text-primary"})})}function Ce({societyName:e,children:t}){const{data:n,isLoading:r}=Za({queryKey:["residencyStatus",e],queryFn:async()=>{try{const s=await fetch(`/api/residencyStatus?societyName=${encodeURIComponent(e)}`);if(!s.ok)throw new Error("Failed");return(await s.json()).serviceStatus}catch(s){return console.error("Failed to fetch residency status",s),"ON"}},refetchInterval:3e3});return r?g.jsx(ct,{}):n==="OFF"?g.jsx(Vf,{residencyName:e}):t}function Ye({component:e,role:t,params:n}){const{user:r,loading:s}=dr();if(s)return g.jsx(ct,{});if(!r)return g.jsx(W,{to:"/login"});if(n?.societyName){const o=decodeURIComponent(n.societyName);if(r.residencyName&&r.residencyName!==o){const i=`/${encodeURIComponent(r.residencyName)}`;if(r.role==="admin")return g.jsx(W,{to:`${i}/admin`});if(r.role==="guard")return g.jsx(W,{to:`${i}/guard`});if(r.role==="resident"){const a=r.flatNumber?`/${r.flatNumber}`:"";return g.jsx(W,{to:`${i}/resident${a}`})}}}if(t&&r.role!==t){const o=r.residencyName?`/${encodeURIComponent(r.residencyName)}`:"";if(r.role==="admin")return g.jsx(W,{to:`${o}/admin`});if(r.role==="guard")return g.jsx(W,{to:`${o}/guard`});if(r.role==="resident"){const i=r.flatNumber?`/${r.flatNumber}`:"";return g.jsx(W,{to:`${o}/resident${i}`})}return g.jsx(W,{to:"/login"})}if(t==="resident"){const o=r.residencyName?`/${encodeURIComponent(r.residencyName)}`:"";if(n?.flatNumber){if(r.flatNumber&&r.flatNumber!==n.flatNumber)return g.jsx(W,{to:`${o}/resident/${r.flatNumber}`})}else if(r.flatNumber)return g.jsx(W,{to:`${o}/resident/${r.flatNumber}`})}return g.jsx(e,{...n})}function wt({role:e,pathSuffix:t=""}){const{user:n,loading:r}=dr();if(r)return g.jsx(ct,{});if(n&&(n.role===e||e==="any")){const s=n.residencyName?`/${encodeURIComponent(n.residencyName)}`:"",o=n.role==="resident"?"/resident":`/${n.role}`,i=t?`/${e}${t}`:o;return g.jsx(W,{to:`${s}${i}`})}return g.jsx(W,{to:"/login"})}function zf(){return g.jsx(b.Suspense,{fallback:g.jsx(ct,{}),children:g.jsxs(wa,{children:[g.jsx(z,{path:"/",component:()=>{const{user:e,loading:t}=dr();if(t)return g.jsx(ct,{});if(e){const n=e.residencyName?`/${encodeURIComponent(e.residencyName)}`:"";if(e.role==="admin")return g.jsx(W,{to:`${n}/admin`});if(e.role==="guard")return g.jsx(W,{to:`${n}/guard`});if(e.role==="resident"){const r=e.flatNumber?`/${e.flatNumber}`:"";return g.jsx(W,{to:`${n}/resident${r}`})}}return g.jsx(W,{to:"/login"})}}),g.jsx(z,{path:"/login",component:Ff}),g.jsx(z,{path:"/register-residency",component:jf}),g.jsx(z,{path:"/owner-login",component:qf}),g.jsx(z,{path:"/Owner/:ownerName",children:e=>g.jsx(Bf,{ownerName:e.ownerName})}),g.jsx(z,{path:"/:societyName/visitor-form",children:e=>g.jsx(Ce,{societyName:e.societyName,children:g.jsx(is,{residencyName:e.societyName})})}),g.jsx(z,{path:"/visitor-form/:residencyName",children:e=>g.jsx(Ce,{societyName:e.residencyName,children:g.jsx(is,{residencyName:e.residencyName})})}),g.jsx(z,{path:"/visitor-success",component:Mf}),g.jsx(z,{path:"/:societyName/resident/:flatNumber",children:e=>g.jsx(Ce,{societyName:e.societyName,children:g.jsx(Ye,{component:as,role:"resident",params:e})})}),g.jsx(z,{path:"/:societyName/resident",children:e=>g.jsx(Ce,{societyName:e.societyName,children:g.jsx(Ye,{component:as,role:"resident",params:e})})}),g.jsx(z,{path:"/:societyName/guard",children:e=>g.jsx(Ce,{societyName:e.societyName,children:g.jsx(Ye,{component:Lf,role:"guard",params:e})})}),g.jsx(z,{path:"/:societyName/admin",children:e=>g.jsx(Ce,{societyName:e.societyName,children:g.jsx(Ye,{component:$f,role:"admin",params:e})})}),g.jsx(z,{path:"/:societyName/admin/management",children:e=>g.jsx(Ce,{societyName:e.societyName,children:g.jsx(Ye,{component:Uf,role:"admin",params:e})})}),g.jsx(z,{path:"/resident",component:()=>g.jsx(wt,{role:"resident"})}),g.jsx(z,{path:"/guard",component:()=>g.jsx(wt,{role:"guard"})}),g.jsx(z,{path:"/admin",component:()=>g.jsx(wt,{role:"admin"})}),g.jsx(z,{path:"/admin/management",component:()=>g.jsx(wt,{role:"admin",pathSuffix:"/management"})}),g.jsx(z,{component:Df})]})})}function Hf(){return g.jsx(Ua,{client:tc,children:g.jsx(_f,{children:g.jsxs(Ld,{children:[g.jsx(ul,{}),g.jsx(zf,{})]})})})}"serviceWorker"in navigator&&(window.addEventListener("load",()=>{const e=new URLSearchParams({apiKey:"AIzaSyBTwsbAP2oJ0Y35-F6azy-BG4lCpWoQzx0",authDomain:"visitsafe-3b609.firebaseapp.com",projectId:"visitsafe-3b609",storageBucket:"visitsafe-3b609.firebasestorage.app",messagingSenderId:"457616438306",appId:"1:457616438306:web:6796565799e0ce2620867b"}).toString();navigator.serviceWorker.register(`/service-worker.js?${e}`).then(t=>{console.log("SW registered:",t),mi()}).catch(t=>{console.log("SW registration failed:",t)})}),window.addEventListener("click",()=>{Pn()},{once:!0}));Gi.createRoot(document.getElementById("root")).render(g.jsx(Hf,{}));export{gd as A,yd as C,Gf as L,Yf as R,dt as S,jt as V,ne as _,ba as a,ac as b,Pe as c,dr as d,Ps as e,vo as f,cc as g,wd as h,hn as i,et as j,_a as k,kr as l,Ha as m,H as n,ud as o,Pc as p,tc as q,sn as s,Za as u};
