import{r as i,j as e,w as d,L as n}from"./ui-3vQ9-yJw.js";import{L as m}from"./Layout-q0bwL00g.js";import{a as u}from"./use-visitor-requests-BBxtUmkU.js";import{R as p}from"./RequestCard-BvZ_Mquu.js";import{I as x}from"./input-DhaQutbK.js";import{d as f}from"./index-sJx7Xdqp.js";import"./vendor-C0Dkio3Y.js";import"./button-BxgNf8B1.js";import"./index-C-65KjJ3.js";import"./useMutation-NgwOv-kr.js";import"./types-DkwUutMY.js";import"./card-C-wb9owH.js";import"./en-US-BddybvhD.js";import"./firebase-CupIkEz0.js";function G(){const{user:t}=f(),{data:l,isLoading:o}=u(),[a,c]=i.useState("");i.useEffect(()=>{t?.residencyName&&(document.title=`${t.residencyName} Guard Dashboard`)},[t?.residencyName]);const r=l?.filter(s=>["approved","entered","pending"].includes(s.status)&&(s.visitorName.toLowerCase().includes(a.toLowerCase())||s.flat.number.includes(a)||s.flat.block.name.toLowerCase().includes(a.toLowerCase())))||[];return e.jsxs(m,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-display font-bold text-slate-900",children:[t?.residencyName," Security Gate"]}),e.jsxs("p",{className:"text-slate-500",children:["Verify entry and exit for ",t?.residencyName,"."]})]}),e.jsxs("div",{className:"relative w-full md:w-72",children:[e.jsx(d,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(x,{placeholder:"Search visitor, block, or flat...",className:"pl-9 bg-white",value:a,onChange:s=>c(s.target.value)})]})]}),o?e.jsx("div",{className:"flex justify-center p-12",children:e.jsx(n,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.map(s=>e.jsx(p,{request:s,variant:"guard"},s.id)),r.length===0&&e.jsx("div",{className:"col-span-full p-12 text-center text-slate-400",children:e.jsx("p",{children:"No active requests matching your search."})})]})]})}export{G as default};
